"use strict";$(function(){console.log("Ready.");var e=$(".gameholder"),a=$(".square"),t=$("#play"),r=$("#ready"),n=$("#timerScreen"),s=$(".introduction"),d=$("#clickScoreScreen"),o=$("#userScoreScreen"),c=$("#timeDifferenceScreen"),i=$("#fastestClickScreen"),l=$("#averageCLickScreen"),g=$("#highscoreScreen"),u=$("#highscoreFastestClickScreen"),b=$("#highscoreAverageCLickScreen"),h=$(".badge"),f=$("#badge1"),C=$("#badge2"),m=$("#badge3"),v=$("#badge4"),S=$("#badge5"),k=$("#badge6"),p=$("#badge7"),y=$("#badge8"),x=20,M=null,T=200,I=!1,q=0,w=0,L=0,j=0,A=0,D=0,F=0,Q=0,R=0,z=0,B=0,E=[],G=0,H=0,J=function(){return B=z-R},K=function(){return G=Math.min.apply(Math,E)},N=function(){var e=E.reduce(function(e,a){return e+a},0);return H=parseInt(e/E.length)},O=function(){(G<F||0===F)&&(F=G,u.html(F)),(H<Q||0===Q)&&(Q=H,b.html(Q)),q>D&&(D=q,g.html(D)),q=0,w=0,L=0,j=0,w=0,E=[],G=0,H=0,clearInterval(M),x=20,a.removeClass("otter beaver"),h.removeClass("badge1 badge2 badge3 badge4 badge5 badge6 badge7 badge8")};r.on("click",function(){s.addClass("hide")}),t.on("click",function(){!1===I&&(O(),I=!0,V(),M=setInterval(function(){x--,n.html(x),0===x&&(n.addTemporaryClass("ringing",2e3),clearInterval(M),I=!1)},1e3))});var P=function(){var e=Math.floor(Math.random()*a.length);return a.eq(e)},U=function(){return 99*Math.random()+1<30?"otter":"beaver"},V=function e(){setTimeout(function(){P().addTemporaryClass(U(),1e3),T=1e3*Math.random()*1.5+1,!0===I&&(R=$.now(),e())},T)},W=function(){j>5&&f.addClass("badge1"),j>10&&C.addClass("badge2"),j>20&&m.addClass("badge3"),j>50&&v.addClass("badge4"),L>5&&S.addClass("badge5"),L>10&&k.addClass("badge6"),A>10&&p.addClass("badge7"),q>D&&y.addClass("badge8")};e.on("click",function(e){z=$.now(),!0===I&&($(e.target).hasClass("beaver")?(w=20,q+=20,j+=1,W(),$(e.target).removeClass("beaver")):$(e.target).hasClass("otter")?(w=-10,q-=20,L+=1,W(),$(e.target).removeClass("otter")):(w=-5,q-=5,A+=1),d.text(w),o.text(q),E.push(J()),c.text(J()),i.text(K()),l.text(N()))}),function(e){e.fn.extend({addTemporaryClass:function(a,t){var r=this;return setTimeout(function(){r.removeClass(a)},t),this.each(function(){e(this).addClass(a)})}})}(jQuery)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsIiRzcXVhcmVzIiwiJGdhbWVob2xkZXIiLCIkcGxheSIsIiRyZWFkeSIsIiRjbGlja1Njb3JlU2NyZWVuIiwiJGNsaWNrVGltZURpZmZlcmVuY2VTY3JlZW4iLCIkZmFzdGVzdENsaWNrU2NyZWVuIiwiJGhpZ2hlc3RzY29yZVNjcmVlbiIsIiRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4iLCIkYmFkZ2VzIiwiJGJhZGdlMSIsIiRiYWRnZTIiLCIkYmFkZ2UzIiwiJGJhZGdlNCIsIiRiYWRnZTUiLCIkYmFkZ2U2IiwiJGJhZGdlNyIsInRpbWVSZW1haW5pbmciLCJ0aW1lcklkIiwiZ2FtZU9uIiwidXNlclNjb3JlIiwiY2xpY2tTY29yZSIsIm90dGVyU2NvcmUiLCJiZWF2ZXJTY29yZSIsImhpZ2hzY29yZSIsImhpZ2hzY29yZUZhc3Rlc3RDbGlja1RpbWUiLCJ0aW1lU2hvd0FuaW1hbCIsInVzZXJDbGlja0FuaW1hbCIsImNsaWNrVGltZSIsInVzZXJUaW1lQXJyYXkiLCJ1c2VyRmFzdGVzdENMaWNrIiwiZmluZENsaWNrVGltZSIsImZpbmRVc2VyRmFzdGVzdENMaWNrIiwiYXBwbHkiLCJmaW5kVXNlckF2ZXJhZ2VDbGlja1RpbWUiLCJzdW0iLCJ1c2VyQXZlcmFnZUNsaWNrVGltZSIsInBhcnNlSW50IiwibGVuZ3RoIiwicmVzZXQiLCJoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwib24iLCJhZGRDbGFzcyIsInNob3dBbmltYWxzIiwic2V0SW50ZXJ2YWwiLCIkdGltZXJTY3JlZW4iLCJhZGRUZW1wb3JhcnlDbGFzcyIsInNlbGVjdFJhbmRvbVNxdWFyZSIsImZsb29yIiwiTWF0aCIsInJhbmRvbUluZGV4IiwicmFuZG9tQW5pbWFsIiwic2V0VGltZW91dCIsIm5vdyIsImRlbGF5IiwiY2hlY2tBbmRTaG93QmFkZ2VzIiwiYmxhbmtTY29yZSIsIiRiYWRnZTgiLCJlIiwiaGFzQ2xhc3MiLCJ0YXJnZXQiLCJ0ZXh0IiwicHVzaCIsIiRhdmVyYWdlQ0xpY2tTY3JlZW4iLCJmbiIsImV4dGVuZCIsImNsYXNzTmFtZSIsImR1cmF0aW9uIiwiZWxlbWVudHMiLCJlYWNoIiwidGhpcyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FDQUMsUUFBUUMsSUFBSSxTQUFaRCxJQUFBQSxHQUFBRCxFQUFBLGVBQ0FHLEVBQUFILEVBQUEsV0FDTUksRUFBQUEsRUFBQUEsU0FDQUQsRUFBV0gsRUFBRSxVQUNiSyxFQUFRTCxFQUFkLGdCQUNNTSxFQUFXTixFQUFqQixpQkFLQU8sRUFBQVAsRUFBQSxxQkFDTU8sRUFBb0JQLEVBQUUsb0JBRzVCUSxFQUFBUixFQUFBLHlCQUNNUSxFQUFBQSxFQUFBQSx1QkFDQUMsRUFBd0JULEVBQUEsdUJBRzlCVSxFQUFBVixFQUFBLG9CQUNNVSxFQUF3QlYsRUFBQSxnQ0FDeEJXLEVBQW9DWCxFQUFBLGdDQUcxQ1ksRUFBQVosRUFBQSxVQUNNWSxFQUFZWixFQUFBLFdBQ1phLEVBQVliLEVBQUEsV0FDWmMsRUFBWWQsRUFBQSxXQUNaZSxFQUFZZixFQUFBLFdBQ1pnQixFQUFZaEIsRUFBQSxXQUNaaUIsRUFBWWpCLEVBQUEsV0FDWmtCLEVBQVlsQixFQUFBLFdBQ1ptQixFQUFZbkIsRUFBQSxXQUdsQm9CLEVBQUEsR0FDSUEsRUFBQUEsS0FDQUMsRUFBQUEsSUFHSkMsR0FBQSxFQUdBQyxFQUFBLEVBQ0lBLEVBQUosRUFDSUMsRUFBYSxFQUNiQyxFQUFKLEVBQ0lDLEVBQUFBLEVBR0pDLEVBQUEsRUFDSUEsRUFBSixFQUNJQyxFQUE0QixFQUdoQ0MsRUFBQSxFQUNJQSxFQUFKLEVBQ0lDLEVBQUFBLEVBQ0FDLEtBQ0FDLEVBQUosRUFDSUMsRUFBSixFQUdBQyxFQUFBLFdBRUVILE1BREZBLEdBQU1HLEVBQUFBLEdBSU5DLEVBQUEsV0FFRUYsTUFERkEsR0FBTUUsS0FBQUEsSUFBdUJD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LCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdSZWFkeS4nKTtcbiAgLy9kZWZpbmUgZ2xvYmFsIHZhcmlhYmxlc1xuICBjb25zdCAkZ2FtZWhvbGRlciA9ICQoJy5nYW1laG9sZGVyJyk7XG4gIGNvbnN0ICRzcXVhcmVzID0gJCgnLnNxdWFyZScpO1xuICBjb25zdCAkcGxheSA9ICQoJyNwbGF5Jyk7XG4gIGNvbnN0ICRyZWFkeSA9ICQoJyNyZWFkeScpO1xuICBjb25zdCAkdGltZXJTY3JlZW4gPSAkKCcjdGltZXJTY3JlZW4nKTtcbiAgY29uc3QgJGludHJvZHVjdGlvbiA9ICQoJy5pbnRyb2R1Y3Rpb24nKTtcblxuXG4gIC8vZ2xvYmFsIHZhaWFibGVzIGZvciB1c2VyIHNjb3Jlc1xuICBjb25zdCAkY2xpY2tTY29yZVNjcmVlbiA9ICQoJyNjbGlja1Njb3JlU2NyZWVuJyk7XG4gIGNvbnN0ICR1c2VyU2NvcmVTY3JlZW4gPSAkKCcjdXNlclNjb3JlU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFpcmFibGVzIGZvciB1c2VyIGNsaWNrIHRpbWVzXG4gIGNvbnN0ICRjbGlja1RpbWVEaWZmZXJlbmNlU2NyZWVuID0gJCgnI3RpbWVEaWZmZXJlbmNlU2NyZWVuJyk7XG4gIGNvbnN0ICRmYXN0ZXN0Q2xpY2tTY3JlZW4gPSAkKCcjZmFzdGVzdENsaWNrU2NyZWVuJyk7XG4gIGNvbnN0ICRhdmVyYWdlQ0xpY2tTY3JlZW4gPSAkKCcjYXZlcmFnZUNMaWNrU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFyaWFibGVzIGZvciB0b3BzY29yZXNcbiAgY29uc3QgJGhpZ2hlc3RzY29yZVNjcmVlbiA9ICQoJyNoaWdoc2NvcmVTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZUZhc3Rlc3RDbGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVBdmVyYWdlQ0xpY2tTY3JlZW4nKTtcblxuICAvL2dsb2JhbCB2YXJpYWJsZXMgZm9yIGJhZGdlc1xuICBjb25zdCAkYmFkZ2VzID0gJCgnLmJhZGdlJyk7XG4gIGNvbnN0ICRiYWRnZTEgPSAkKCcjYmFkZ2UxJyk7XG4gIGNvbnN0ICRiYWRnZTIgPSAkKCcjYmFkZ2UyJyk7XG4gIGNvbnN0ICRiYWRnZTMgPSAkKCcjYmFkZ2UzJyk7XG4gIGNvbnN0ICRiYWRnZTQgPSAkKCcjYmFkZ2U0Jyk7XG4gIGNvbnN0ICRiYWRnZTUgPSAkKCcjYmFkZ2U1Jyk7XG4gIGNvbnN0ICRiYWRnZTYgPSAkKCcjYmFkZ2U2Jyk7XG4gIGNvbnN0ICRiYWRnZTcgPSAkKCcjYmFkZ2U3Jyk7XG4gIGNvbnN0ICRiYWRnZTggPSAkKCcjYmFkZ2U4Jyk7XG5cbiAgLy8gdGltZXIgY29uc3RhbnRzXG4gIGxldCB0aW1lUmVtYWluaW5nID0gMjA7XG4gIGxldCB0aW1lcklkID0gbnVsbDtcbiAgbGV0IGRlbGF5ID0gMjAwO1xuXG4gIC8vIGdhbWUgbG9naWMgY29uc3RhbnRzXG4gIGxldCBnYW1lT24gPSBmYWxzZTtcblxuICAvL2dhbWUgc2NvcmUgY29uc3RhbnRzXG4gIGxldCB1c2VyU2NvcmUgPSAwO1xuICBsZXQgY2xpY2tTY29yZSA9IDA7XG4gIGxldCBvdHRlclNjb3JlID0gMDtcbiAgbGV0IGJlYXZlclNjb3JlID0gMDtcbiAgbGV0IGJsYW5rU2NvcmUgPSAwO1xuXG4gIC8vaGlnaCBzY29yZSBjb25zdGFudHNcbiAgbGV0IGhpZ2hzY29yZSA9IDA7XG4gIGxldCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gMDtcbiAgbGV0IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgPSAwO1xuXG4gIC8vY2xpY2sgdGltZSBjb25zdGFudHNcbiAgbGV0IHRpbWVTaG93QW5pbWFsID0gMDtcbiAgbGV0IHVzZXJDbGlja0FuaW1hbCA9IDA7XG4gIGxldCBjbGlja1RpbWUgPSAwO1xuICBsZXQgdXNlclRpbWVBcnJheSA9IFtdO1xuICBsZXQgdXNlckZhc3Rlc3RDTGljayA9IDA7XG4gIGxldCB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG5cbiAgLy9mdW5jdGlvbiB0byBmaW5kIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZENsaWNrVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNsaWNrVGltZSA9ICgodXNlckNsaWNrQW5pbWFsIC0gdGltZVNob3dBbmltYWwpKTtcbiAgICByZXR1cm4gY2xpY2tUaW1lO1xuICB9O1xuICAvL2Z1bmN0aW9uIHRvIGZpbmQgdGhlIHBsYXllcnMgZmFzdGVzIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJGYXN0ZXN0Q0xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdXNlclRpbWVBcnJheSk7XG4gICAgcmV0dXJuIHVzZXJGYXN0ZXN0Q0xpY2s7XG4gIH07XG4gIC8vZnVuY3Rpb24gdG8gZmluZCB0aGUgcGxheWVycyBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgc3VtID0gdXNlclRpbWVBcnJheS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH0sIDApO1xuICAgIHVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gcGFyc2VJbnQoc3VtLyh1c2VyVGltZUFycmF5Lmxlbmd0aCkpO1xuICAgIHJldHVybiB1c2VyQXZlcmFnZUNsaWNrVGltZTtcbiAgfTtcbiAgLy8gcmVzZXQgZnVuY3Rpb25cbiAgY29uc3QgcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAvL3VwZGF0ZSBmYXN0ZXN0IGNsaWNrIHRpbWUgYW5kIGZhc3Rlc3QgY2xpY2sgdGltZSBzY3JlZW5cbiAgICBpZiAodXNlckZhc3Rlc3RDTGljayA8IGhpZ2hzY29yZUZhc3Rlc3RDbGlja1RpbWUgfHwgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSA9PT0gMCkge1xuICAgICAgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSA9IHVzZXJGYXN0ZXN0Q0xpY2s7XG4gICAgICAkaGlnaGVzdHNjb3JlRmFzdGVzdENsaWNrU2NyZWVuLmh0bWwoaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSk7XG4gICAgfVxuICAgIC8vdXBkYXRlIGZhc3Rlc3QgYXZlcmFnZSBjbGljayB0aW1lIGFuZCBmYXN0ZXN0IGF2ZXJhZ2UgY2xpY2sgdGltZSBzY3JlZW5cbiAgICBpZiAodXNlckF2ZXJhZ2VDbGlja1RpbWUgPCBoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lIHx8IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgPT09IDApIHtcbiAgICAgIGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgPSB1c2VyQXZlcmFnZUNsaWNrVGltZTtcbiAgICAgICRoaWdoZXN0c2NvcmVhdmVyYWdlQ0xpY2tTY3JlZW4uaHRtbChoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lKTtcbiAgICB9XG4gICAgLy91cGRhdGUgaGlnaHNjb3JlIGFuZCBoaWdoc2NvcmUgc2NyZWVuXG4gICAgaWYgKHVzZXJTY29yZSA+IGhpZ2hzY29yZSkge1xuICAgICAgaGlnaHNjb3JlID0gdXNlclNjb3JlO1xuICAgICAgJGhpZ2hlc3RzY29yZVNjcmVlbi5odG1sKGhpZ2hzY29yZSk7XG4gICAgfVxuICAgIC8vcmVzZXQgYWxsIHNjb3Jlc1xuICAgIHVzZXJTY29yZSA9IDA7XG4gICAgY2xpY2tTY29yZSA9IDA7XG4gICAgb3R0ZXJTY29yZSA9IDA7XG4gICAgYmVhdmVyU2NvcmUgPSAwO1xuICAgIGNsaWNrU2NvcmUgPSAwO1xuICAgIC8vcmVzZXQgdXNlciBmYXN0ZXN0IGFuZCBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgICB1c2VyVGltZUFycmF5ID0gW107XG4gICAgdXNlckZhc3Rlc3RDTGljayA9IDA7XG4gICAgdXNlckF2ZXJhZ2VDbGlja1RpbWUgPSAwO1xuICAgIC8vcmVzZXQgdGltZXIgYW5kIHVwZGF0ZSB0aW1lciBzY3JlZW5cbiAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgIHRpbWVSZW1haW5pbmcgPSAyMDtcbiAgICAvL2NsZWFyIGdhbWUgYm9hcmRcbiAgICAkc3F1YXJlcy5yZW1vdmVDbGFzcygnb3R0ZXIgYmVhdmVyJyk7XG4gICAgLy9jbGVhciBiYWRnZXMgZnJvbSBiYWRnZSBhcmVhXG4gICAgJGJhZGdlcy5yZW1vdmVDbGFzcygnYmFkZ2UxIGJhZGdlMiBiYWRnZTMgYmFkZ2U0IGJhZGdlNSBiYWRnZTYgYmFkZ2U3IGJhZGdlOCcpO1xuICB9O1xuXG4gIC8vbW92ZSBmcm9tIHJlYWR5IGludHJvZHVjdGlvbiBzY3JlZW4gdG8gZ2FtZVxuICAkcmVhZHkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgJGludHJvZHVjdGlvbi5hZGRDbGFzcygnaGlkZScpO1xuICB9KTtcblxuICAvL3N0YXJ0IGdhbWUgd2hlbiAnc3RhcnQgYnV0dG9uJyBpcyBwdXNoZWQsIG9ubHkgaWYgZ2FtZSBub3Qgc3RhcnRlZFxuICAkcGxheS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoZ2FtZU9uID09PSBmYWxzZSkge1xuICAgICAgLy9yZXNldCBnYW1lXG4gICAgICByZXNldCgpO1xuICAgICAgLy9zdG9yZSB0aGF0IGdhbWUgaGFzIGJlZW4gc3RhcnRlZFxuICAgICAgZ2FtZU9uID0gdHJ1ZTtcbiAgICAgIC8vcnVuIGZ1bmN0aW9uIHRvIHNob3cgYmVhdmVycyBhbmQgb3R0ZXJzIGZvciB0aW1lIGludGVydmFsXG4gICAgICBzaG93QW5pbWFscygpO1xuICAgICAgLy9zdGFydCB0aW1lclxuICAgICAgdGltZXJJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdGltZVJlbWFpbmluZy0tO1xuICAgICAgICAkdGltZXJTY3JlZW4uaHRtbCh0aW1lUmVtYWluaW5nKTtcbiAgICAgICAgLy8gd2hlbiB0aW1lciByZWFjaGVzIHplcm8gc3RvcCBnYW1lXG4gICAgICAgIGlmICh0aW1lUmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgJHRpbWVyU2NyZWVuLmFkZFRlbXBvcmFyeUNsYXNzKCdyaW5naW5nJywgMjAwMCk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcbiAgICAgICAgICBnYW1lT24gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9KTtcblxuICAvL3NlbGVjdCByYW5kb20gc3F1YXJlXG4gIGNvbnN0IHNlbGVjdFJhbmRvbVNxdWFyZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogJHNxdWFyZXMubGVuZ3RoKTtcbiAgICByZXR1cm4gJHNxdWFyZXMuZXEocmFuZG9tSW5kZXgpO1xuICB9O1xuXG4gIC8vIHJhbmRvbWlzZSB3aGljaCBhbmltYWwgdG8gY2FsbCAoY3VycmVubHR5IG90dGVyIG9yIGJlYXZlciksIGJ1dCBwcmVmZXIgYmVhdmVyXG4gIGNvbnN0IHJhbmRvbUFuaW1hbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAxKSArIDEpIDwgMzAgPyAnb3R0ZXInIDogJ2JlYXZlcic7XG4gIH07XG5cbiAgLy9hZGQgYmVhdmVyL290dGVyIGNsYXNzIHRvIHJhbmRvbSBzcXVhcmUsIHRoZW4gY2FsbCBmdW5jdGlvbiBhZ2FpbiBhdCBhbiByYW5kb20gaW50ZXJ2YWwgKGJldHdlZW4gMyBhbmQgMSBzZWNvbmQpXG4gIGNvbnN0IHNob3dBbmltYWxzID0gZnVuY3Rpb24oKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZWxlY3RSYW5kb21TcXVhcmUoKS5hZGRUZW1wb3JhcnlDbGFzcyhyYW5kb21BbmltYWwoKSwgMTAwMCk7XG4gICAgICBkZWxheSA9IE1hdGgucmFuZG9tKCkgKiAxMDAwICogKDIuNSAtIDEpICsgMTtcbiAgICAgIC8vb25seSBzaG93IGFuaW1hbHMgaWYgZ2FtZSBoYXMgYmVlbiBzdGFydGVkIGFuZCBjb3VudGRvd24gdGltZXIgaGFzIG5vdCBydW4gb3V0XG4gICAgICBpZiAoZ2FtZU9uID09PSB0cnVlKSB7XG4gICAgICAgIHRpbWVTaG93QW5pbWFsID0gJC5ub3coKTtcbiAgICAgICAgc2hvd0FuaW1hbHMoKTtcbiAgICAgIH1cbiAgICB9LCBkZWxheSk7XG4gIH07XG5cbiAgLy8gY2hlY2sgYW5kIHNob3cgYmFkZ2VzIGlmIHBsYXllcidzIHNjb3JlcyBhcmUgaGlnaCBlbm91Z2hcbiAgY29uc3QgY2hlY2tBbmRTaG93QmFkZ2VzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGJlYXZlclNjb3JlID4gNSkge1xuICAgICAgJGJhZGdlMS5hZGRDbGFzcygnYmFkZ2UxJyk7XG4gICAgfVxuICAgIGlmIChiZWF2ZXJTY29yZSA+IDEwKSB7XG4gICAgICAkYmFkZ2UyLmFkZENsYXNzKCdiYWRnZTInKTtcbiAgICB9XG4gICAgaWYgKGJlYXZlclNjb3JlID4gMjApIHtcbiAgICAgICRiYWRnZTMuYWRkQ2xhc3MoJ2JhZGdlMycpO1xuICAgIH1cbiAgICBpZiAoYmVhdmVyU2NvcmUgPiA1MCkge1xuICAgICAgJGJhZGdlNC5hZGRDbGFzcygnYmFkZ2U0Jyk7XG4gICAgfVxuICAgIGlmIChvdHRlclNjb3JlID4gNSkge1xuICAgICAgJGJhZGdlNS5hZGRDbGFzcygnYmFkZ2U1Jyk7XG4gICAgfVxuICAgIGlmIChvdHRlclNjb3JlID4gMTApIHtcbiAgICAgICRiYWRnZTYuYWRkQ2xhc3MoJ2JhZGdlNicpO1xuICAgIH1cbiAgICBpZiAoYmxhbmtTY29yZSA+IDEwKSB7XG4gICAgICAkYmFkZ2U3LmFkZENsYXNzKCdiYWRnZTcnKTtcbiAgICB9XG4gICAgaWYgKHVzZXJTY29yZSA+IGhpZ2hzY29yZSkge1xuICAgICAgJGJhZGdlOC5hZGRDbGFzcygnYmFkZ2U4Jyk7XG4gICAgfVxuICB9O1xuXG4gIC8vZ2FtZSBsb2dpYyBmb3IgdXNlciBjbGlja2luZyBvbiBiZWF2ZXJzL290dGVycy9lbXB0eSBzcXVhcmVcbiAgJGdhbWVob2xkZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIHVzZXJDbGlja0FuaW1hbCA9ICQubm93KCk7XG4gICAgaWYgKGdhbWVPbiA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdiZWF2ZXInKSkge1xuICAgICAgICAvL3VwZGF0ZSBzY29yZXNcbiAgICAgICAgY2xpY2tTY29yZSA9IDIwO1xuICAgICAgICB1c2VyU2NvcmUgKz0gMjA7XG4gICAgICAgIGJlYXZlclNjb3JlICs9IDE7XG4gICAgICAgIC8vc2hvdyBiYWRnZXNcbiAgICAgICAgY2hlY2tBbmRTaG93QmFkZ2VzKCk7XG4gICAgICAgIC8vaGlkZSBhbmltYWwgYnkgcmVtb3ZpbmcgY2xhc3NcbiAgICAgICAgKCQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdiZWF2ZXInKSk7XG4gICAgICAgIC8vbWFrZSBzb3VuZCAobm90IGluY2x1ZGVkIHlldClcbiAgICAgIH0gZWxzZSBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ290dGVyJykpIHtcbiAgICAgICAgY2xpY2tTY29yZSA9IC0xMDtcbiAgICAgICAgdXNlclNjb3JlIC09IDIwO1xuICAgICAgICBvdHRlclNjb3JlICs9IDE7XG4gICAgICAgIGNoZWNrQW5kU2hvd0JhZGdlcygpO1xuICAgICAgICAoJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ290dGVyJykpO1xuICAgICAgICAvL21ha2Ugc291bmQgKG5vdCBpbmNsdWRlZCB5ZXQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGlja1Njb3JlID0gLTU7XG4gICAgICAgIHVzZXJTY29yZSAtPSA1O1xuICAgICAgICBibGFua1Njb3JlICs9IDE7XG4gICAgICAgIC8vbWFrZSBzb3VuZCAobm90IGluY2x1ZGVkIHlldClcbiAgICAgIH1cbiAgICAgIC8vc2hvdyB1c2VycyBjdXJyZW50IHNjb3JlLCBydW5uaW5nIHRvdGFsIGFuZCBjbGljayB0aW1lXG4gICAgICAkY2xpY2tTY29yZVNjcmVlbi50ZXh0KGNsaWNrU2NvcmUpO1xuICAgICAgJHVzZXJTY29yZVNjcmVlbi50ZXh0KHVzZXJTY29yZSk7XG4gICAgICAvL3N0b3JlIHVzZXJzIHRpbWUgZGlmZmVyZW5jZSBpbiBhcnJheVxuICAgICAgdXNlclRpbWVBcnJheS5wdXNoKGZpbmRDbGlja1RpbWUoKSk7XG4gICAgICAvL3Nob3cgY2xpY2sgdGltZSB0byB1c2Vyc1xuICAgICAgJGNsaWNrVGltZURpZmZlcmVuY2VTY3JlZW4udGV4dChmaW5kQ2xpY2tUaW1lKCkpO1xuICAgICAgLy9maW5kIGFuZCBzaG93IHVzZXJzIGZhc3Rlc3QgY2xpY2sgdGltZVxuICAgICAgJGZhc3Rlc3RDbGlja1NjcmVlbi50ZXh0KGZpbmRVc2VyRmFzdGVzdENMaWNrKCkpO1xuICAgICAgLy9maW5kIGFuZCBzaG93IHVzZXJzIGF2ZXJhZ2UgY2xpY2sgdGltZVxuICAgICAgJGF2ZXJhZ2VDTGlja1NjcmVlbi50ZXh0KGZpbmRVc2VyQXZlcmFnZUNsaWNrVGltZSgpKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vY3JlYXRlICdhZGRUZW1wb3JhcnlDbGFzcycgZnVuY3Rpb25cbiAgKGZ1bmN0aW9uKCQpIHtcbiAgICAkLmZuLmV4dGVuZCh7XG4gICAgICBhZGRUZW1wb3JhcnlDbGFzczogZnVuY3Rpb24oY2xhc3NOYW1lLCBkdXJhdGlvbikge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVsZW1lbnRzLnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KShqUXVlcnkpO1xufSk7XG4iXX0=
