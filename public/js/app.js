"use strict";$(function(){console.log("Ready.");var e=$(".gameholder"),a=$(".square"),t=$("#play"),r=$("#ready"),n=$("#timerScreen"),s=$(".introduction"),d=$("#clickScoreScreen"),o=$("#userScoreScreen"),c=$("#timeDifferenceScreen"),i=$("#fastestClickScreen"),l=$("#averageCLickScreen"),g=$("#highscoreScreen"),u=$("#highscoreFastestClickScreen"),b=$("#highscoreAverageCLickScreen"),h=$(".badge"),f=$("#badge1"),C=$("#badge2"),m=$("#badge3"),v=$("#badge4"),S=$("#badge5"),k=$("#badge6"),p=$("#badge7"),y=$("#badge8"),x=20,M=null,T=200,I=!1,q=0,w=0,L=0,j=0,A=0,D=0,F=0,Q=0,R=0,z=0,B=0,E=[],G=0,H=0,J=function(){return B=z-R},K=function(){return G=Math.min.apply(Math,E)},N=function(){var e=E.reduce(function(e,a){return e+a},0);return H=parseInt(e/E.length)},O=function(){(G<F||0===F)&&(F=G,u.html(F)),(H<Q||0===Q)&&(Q=H,b.html(Q)),q>D&&(D=q,g.html(D)),q=0,w=0,L=0,j=0,w=0,E=[],G=0,H=0,clearInterval(M),x=20,a.removeClass("otter beaver"),h.removeClass("badge1 badge2 badge3 badge4 badge5 badge6 badge7 badge8")};r.on("click",function(){s.addClass("hide")}),t.on("click",function(){!1===I&&(O(),I=!0,V(),M=setInterval(function(){x--,n.html(x),0===x&&(n.addTemporaryClass("ringing",2e3),clearInterval(M),I=!1)},1e3))});var P=function(){var e=Math.floor(Math.random()*a.length);return a.eq(e)},U=function(){return 99*Math.random()+1<30?"otter":"beaver"},V=function e(){setTimeout(function(){P().addTemporaryClass(U(),1e3),T=1e3*Math.random()*1.5+1,!0===I&&(R=$.now(),e())},T)},W=function(){j>5&&f.addClass("badge1"),j>10&&C.addClass("badge2"),j>20&&m.addClass("badge3"),j>50&&v.addClass("badge4"),L>5&&S.addClass("badge5"),L>10&&k.addClass("badge6"),A>10&&p.addClass("badge7"),q>D&&y.addClass("badge8")};e.on("click",function(e){z=$.now(),!0===I&&($(e.target).hasClass("beaver")?(w=20,q+=20,j+=1,W(),$(e.target).removeClass("beaver")):$(e.target).hasClass("otter")?(w=-10,q-=20,L+=1,W(),$(e.target).removeClass("otter")):(w=-5,q-=5,A+=1),d.text(w),o.text(q),E.push(J()),c.text(J()),i.text(K()),l.text(N()))}),function(e){e.fn.extend({addTemporaryClass:function(a,t){var r=this;return setTimeout(function(){r.removeClass(a)},t),this.each(function(){e(this).addClass(a)})}})}(jQuery)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsIiRzcXVhcmVzIiwiJGdhbWVob2xkZXIiLCIkcGxheSIsIiRyZWFkeSIsIiRjbGlja1Njb3JlU2NyZWVuIiwiJGNsaWNrVGltZURpZmZlcmVuY2VTY3JlZW4iLCIkZmFzdGVzdENsaWNrU2NyZWVuIiwiJGhpZ2hlc3RzY29yZVNjcmVlbiIsIiRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4iLCIkYmFkZ2VzIiwiJGJhZGdlMSIsIiRiYWRnZTIiLCIkYmFkZ2UzIiwiJGJhZGdlNCIsIiRiYWRnZTUiLCIkYmFkZ2U2IiwiJGJhZGdlNyIsInRpbWVSZW1haW5pbmciLCJ0aW1lcklkIiwiZ2FtZU9uIiwidXNlclNjb3JlIiwiY2xpY2tTY29yZSIsIm90dGVyU2NvcmUiLCJiZWF2ZXJTY29yZSIsImhpZ2hzY29yZSIsImhpZ2hzY29yZUZhc3Rlc3RDbGlja1RpbWUiLCJ0aW1lU2hvd0FuaW1hbCIsInVzZXJDbGlja0FuaW1hbCIsImNsaWNrVGltZSIsInVzZXJUaW1lQXJyYXkiLCJ1c2VyRmFzdGVzdENMaWNrIiwiZmluZENsaWNrVGltZSIsImZpbmRVc2VyRmFzdGVzdENMaWNrIiwiYXBwbHkiLCJmaW5kVXNlckF2ZXJhZ2VDbGlja1RpbWUiLCJzdW0iLCJ1c2VyQXZlcmFnZUNsaWNrVGltZSIsInBhcnNlSW50IiwibGVuZ3RoIiwicmVzZXQiLCJoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwib24iLCJhZGRDbGFzcyIsInNob3dBbmltYWxzIiwic2V0SW50ZXJ2YWwiLCIkdGltZXJTY3JlZW4iLCJhZGRUZW1wb3JhcnlDbGFzcyIsInNlbGVjdFJhbmRvbVNxdWFyZSIsImZsb29yIiwiTWF0aCIsInJhbmRvbUluZGV4IiwicmFuZG9tQW5pbWFsIiwic2V0VGltZW91dCIsIm5vdyIsImRlbGF5IiwiY2hlY2tBbmRTaG93QmFkZ2VzIiwiYmxhbmtTY29yZSIsIiRiYWRnZTgiLCJlIiwiaGFzQ2xhc3MiLCJ0YXJnZXQiLCJ0ZXh0IiwicHVzaCIsIiRhdmVyYWdlQ0xpY2tTY3JlZW4iLCJmbiIsImV4dGVuZCIsImNsYXNzTmFtZSIsImR1cmF0aW9uIiwiZWxlbWVudHMiLCJlYWNoIiwidGhpcyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FDQUMsUUFBUUMsSUFBSSxTQUFaRCxJQUFBQSxHQUFBRCxFQUFBLGVBQ0FHLEVBQUFILEVBQUEsV0FDTUksRUFBQUEsRUFBQUEsU0FDQUQsRUFBV0gsRUFBRSxVQUNiSyxFQUFRTCxFQUFkLGdCQUNNTSxFQUFXTixFQUFqQixpQkFLQU8sRUFBQVAsRUFBQSxxQkFDTU8sRUFBb0JQLEVBQUUsb0JBRzVCUSxFQUFBUixFQUFBLHlCQUNNUSxFQUFBQSxFQUFBQSx1QkFDQUMsRUFBd0JULEVBQUEsdUJBRzlCVSxFQUFBVixFQUFBLG9CQUNNVSxFQUF3QlYsRUFBQSxnQ0FDeEJXLEVBQW9DWCxFQUFBLGdDQUcxQ1ksRUFBQVosRUFBQSxVQUNNWSxFQUFZWixFQUFBLFdBQ1phLEVBQVliLEVBQUEsV0FDWmMsRUFBWWQsRUFBQSxXQUNaZSxFQUFZZixFQUFBLFdBQ1pnQixFQUFZaEIsRUFBQSxXQUNaaUIsRUFBWWpCLEVBQUEsV0FDWmtCLEVBQVlsQixFQUFBLFdBQ1ptQixFQUFZbkIsRUFBQSxXQUdsQm9CLEVBQUEsR0FDSUEsRUFBQUEsS0FDQUMsRUFBQUEsSUFHSkMsR0FBQSxFQUdBQyxFQUFBLEVBQ0lBLEVBQUosRUFDSUMsRUFBYSxFQUNiQyxFQUFKLEVBQ0lDLEVBQUFBLEVBR0pDLEVBQUEsRUFDSUEsRUFBSixFQUNJQyxFQUE0QixFQUdoQ0MsRUFBQSxFQUNJQSxFQUFKLEVBQ0lDLEVBQUFBLEVBQ0FDLEtBQ0FDLEVBQUosRUFDSUMsRUFBSixFQUdBQyxFQUFBLFdBRUVILE1BREZBLEdBQU1HLEVBQUFBLEdBSU5DLEVBQUEsV0FFRUYsTUFERkEsR0FBTUUsS0FBQUEsSUFBdUJD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LCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdSZWFkeS4nKTtcbiAgLy9kZWZpbmUgZ2xvYmFsIHZhcmlhYmxlc1xuICBjb25zdCAkZ2FtZWhvbGRlciA9ICQoJy5nYW1laG9sZGVyJyk7XG4gIGNvbnN0ICRzcXVhcmVzID0gJCgnLnNxdWFyZScpO1xuICBjb25zdCAkcGxheSA9ICQoJyNwbGF5Jyk7XG4gIGNvbnN0ICRyZWFkeSA9ICQoJyNyZWFkeScpO1xuICBjb25zdCAkdGltZXJTY3JlZW4gPSAkKCcjdGltZXJTY3JlZW4nKTtcbiAgY29uc3QgJGludHJvZHVjdGlvbiA9ICQoJy5pbnRyb2R1Y3Rpb24nKTtcblxuXG4gIC8vZ2xvYmFsIHZhaWFibGVzIGZvciB1c2VyIHNjb3Jlc1xuICBjb25zdCAkY2xpY2tTY29yZVNjcmVlbiA9ICQoJyNjbGlja1Njb3JlU2NyZWVuJyk7XG4gIGNvbnN0ICR1c2VyU2NvcmVTY3JlZW4gPSAkKCcjdXNlclNjb3JlU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFpcmFibGVzIGZvciB1c2VyIGNsaWNrIHRpbWVzXG4gIGNvbnN0ICRjbGlja1RpbWVEaWZmZXJlbmNlU2NyZWVuID0gJCgnI3RpbWVEaWZmZXJlbmNlU2NyZWVuJyk7XG4gIGNvbnN0ICRmYXN0ZXN0Q2xpY2tTY3JlZW4gPSAkKCcjZmFzdGVzdENsaWNrU2NyZWVuJyk7XG4gIGNvbnN0ICRhdmVyYWdlQ0xpY2tTY3JlZW4gPSAkKCcjYXZlcmFnZUNMaWNrU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFyaWFibGVzIGZvciB0b3BzY29yZXNcbiAgY29uc3QgJGhpZ2hlc3RzY29yZVNjcmVlbiA9ICQoJyNoaWdoc2NvcmVTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZUZhc3Rlc3RDbGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVBdmVyYWdlQ0xpY2tTY3JlZW4nKTtcblxuICAvL2dsb2JhbCB2YXJpYWJsZXMgZm9yIGJhZGdlc1xuICBjb25zdCAkYmFkZ2VzID0gJCgnLmJhZGdlJyk7XG4gIGNvbnN0ICRiYWRnZTEgPSAkKCcjYmFkZ2UxJyk7XG4gIGNvbnN0ICRiYWRnZTIgPSAkKCcjYmFkZ2UyJyk7XG4gIGNvbnN0ICRiYWRnZTMgPSAkKCcjYmFkZ2UzJyk7XG4gIGNvbnN0ICRiYWRnZTQgPSAkKCcjYmFkZ2U0Jyk7XG4gIGNvbnN0ICRiYWRnZTUgPSAkKCcjYmFkZ2U1Jyk7XG4gIGNvbnN0ICRiYWRnZTYgPSAkKCcjYmFkZ2U2Jyk7XG4gIGNvbnN0ICRiYWRnZTcgPSAkKCcjYmFkZ2U3Jyk7XG4gIGNvbnN0ICRiYWRnZTggPSAkKCcjYmFkZ2U4Jyk7XG5cbiAgLy8gdGltZXIgY29uc3RhbnRzXG4gIGxldCB0aW1lUmVtYWluaW5nID0gMjA7XG4gIGxldCB0aW1lcklkID0gbnVsbDtcbiAgbGV0IGRlbGF5ID0gMjAwO1xuXG4gIC8vIGdhbWUgbG9naWMgY29uc3RhbnRzXG4gIGxldCBnYW1lT24gPSBmYWxzZTtcblxuICAvL2dhbWUgc2NvcmUgY29uc3RhbnRzXG4gIGxldCB1c2VyU2NvcmUgPSAwO1xuICBsZXQgY2xpY2tTY29yZSA9IDA7XG4gIGxldCBvdHRlclNjb3JlID0gMDtcbiAgbGV0IGJlYXZlclNjb3JlID0gMDtcbiAgbGV0IGJsYW5rU2NvcmUgPSAwO1xuXG4gIC8vaGlnaCBzY29yZSBjb25zdGFudHNcbiAgbGV0IGhpZ2hzY29yZSA9IDA7XG4gIGxldCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gMDtcbiAgbGV0IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgPSAwO1xuXG4gIC8vY2xpY2sgdGltZSBjb25zdGFudHNcbiAgbGV0IHRpbWVTaG93QW5pbWFsID0gMDtcbiAgbGV0IHVzZXJDbGlja0FuaW1hbCA9IDA7XG4gIGxldCBjbGlja1RpbWUgPSAwO1xuICBsZXQgdXNlclRpbWVBcnJheSA9IFtdO1xuICBsZXQgdXNlckZhc3Rlc3RDTGljayA9IDA7XG4gIGxldCB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG5cbiAgLy9mdW5jdGlvbiB0byBmaW5kIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZENsaWNrVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNsaWNrVGltZSA9ICgodXNlckNsaWNrQW5pbWFsIC0gdGltZVNob3dBbmltYWwpKTtcbiAgICByZXR1cm4gY2xpY2tUaW1lO1xuICB9O1xuICAvL2Z1bmN0aW9uIHRvIGZpbmQgdGhlIHBsYXllcnMgZmFzdGVzIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJGYXN0ZXN0Q0xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdXNlclRpbWVBcnJheSk7XG4gICAgcmV0dXJuIHVzZXJGYXN0ZXN0Q0xpY2s7XG4gIH07XG4gIC8vZnVuY3Rpb24gdG8gZmluZCB0aGUgcGxheWVycyBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgc3VtID0gdXNlclRpbWVBcnJheS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH0sIDApO1xuICAgIHVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gcGFyc2VJbnQoc3VtIC8gKHVzZXJUaW1lQXJyYXkubGVuZ3RoKSk7XG4gICAgcmV0dXJuIHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICB9O1xuICAvLyByZXNldCBmdW5jdGlvblxuICBjb25zdCByZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vdXBkYXRlIGZhc3Rlc3QgY2xpY2sgdGltZSBhbmQgZmFzdGVzdCBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyRmFzdGVzdENMaWNrIDwgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSB8fCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID09PSAwKSB7XG4gICAgICBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gdXNlckZhc3Rlc3RDTGljaztcbiAgICAgICRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4uaHRtbChoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lKTtcbiAgICB9XG4gICAgLy91cGRhdGUgZmFzdGVzdCBhdmVyYWdlIGNsaWNrIHRpbWUgYW5kIGZhc3Rlc3QgYXZlcmFnZSBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyQXZlcmFnZUNsaWNrVGltZSA8IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgfHwgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9PT0gMCkge1xuICAgICAgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9IHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICAgICAgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbi5odG1sKGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUpO1xuICAgIH1cbiAgICAvL3VwZGF0ZSBoaWdoc2NvcmUgYW5kIGhpZ2hzY29yZSBzY3JlZW5cbiAgICBpZiAodXNlclNjb3JlID4gaGlnaHNjb3JlKSB7XG4gICAgICBoaWdoc2NvcmUgPSB1c2VyU2NvcmU7XG4gICAgICAkaGlnaGVzdHNjb3JlU2NyZWVuLmh0bWwoaGlnaHNjb3JlKTtcbiAgICB9XG4gICAgLy9yZXNldCBhbGwgc2NvcmVzXG4gICAgdXNlclNjb3JlID0gMDtcbiAgICBjbGlja1Njb3JlID0gMDtcbiAgICBvdHRlclNjb3JlID0gMDtcbiAgICBiZWF2ZXJTY29yZSA9IDA7XG4gICAgY2xpY2tTY29yZSA9IDA7XG4gICAgLy9yZXNldCB1c2VyIGZhc3Rlc3QgYW5kIGF2ZXJhZ2UgY2xpY2sgdGltZVxuICAgIHVzZXJUaW1lQXJyYXkgPSBbXTtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gMDtcbiAgICB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG4gICAgLy9yZXNldCB0aW1lciBhbmQgdXBkYXRlIHRpbWVyIHNjcmVlblxuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgdGltZVJlbWFpbmluZyA9IDIwO1xuICAgIC8vY2xlYXIgZ2FtZSBib2FyZFxuICAgICRzcXVhcmVzLnJlbW92ZUNsYXNzKCdvdHRlciBiZWF2ZXInKTtcbiAgICAvL2NsZWFyIGJhZGdlcyBmcm9tIGJhZGdlIGFyZWFcbiAgICAkYmFkZ2VzLnJlbW92ZUNsYXNzKCdiYWRnZTEgYmFkZ2UyIGJhZGdlMyBiYWRnZTQgYmFkZ2U1IGJhZGdlNiBiYWRnZTcgYmFkZ2U4Jyk7XG4gIH07XG5cbiAgLy9tb3ZlIGZyb20gcmVhZHkgaW50cm9kdWN0aW9uIHNjcmVlbiB0byBnYW1lXG4gICRyZWFkeS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAkaW50cm9kdWN0aW9uLmFkZENsYXNzKCdoaWRlJyk7XG4gIH0pO1xuXG4gIC8vc3RhcnQgZ2FtZSB3aGVuICdzdGFydCBidXR0b24nIGlzIHB1c2hlZCwgb25seSBpZiBnYW1lIG5vdCBzdGFydGVkXG4gICRwbGF5Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGlmIChnYW1lT24gPT09IGZhbHNlKSB7XG4gICAgICAvL3Jlc2V0IGdhbWVcbiAgICAgIHJlc2V0KCk7XG4gICAgICAvL3N0b3JlIHRoYXQgZ2FtZSBoYXMgYmVlbiBzdGFydGVkXG4gICAgICBnYW1lT24gPSB0cnVlO1xuICAgICAgLy9ydW4gZnVuY3Rpb24gdG8gc2hvdyBiZWF2ZXJzIGFuZCBvdHRlcnMgZm9yIHRpbWUgaW50ZXJ2YWxcbiAgICAgIHNob3dBbmltYWxzKCk7XG4gICAgICAvL3N0YXJ0IHRpbWVyXG4gICAgICB0aW1lcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aW1lUmVtYWluaW5nLS07XG4gICAgICAgICR0aW1lclNjcmVlbi5odG1sKHRpbWVSZW1haW5pbmcpO1xuICAgICAgICAvLyB3aGVuIHRpbWVyIHJlYWNoZXMgemVybyBzdG9wIGdhbWVcbiAgICAgICAgaWYgKHRpbWVSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAkdGltZXJTY3JlZW4uYWRkVGVtcG9yYXJ5Q2xhc3MoJ3JpbmdpbmcnLCAyMDAwKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgIGdhbWVPbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vc2VsZWN0IHJhbmRvbSBzcXVhcmVcbiAgY29uc3Qgc2VsZWN0UmFuZG9tU3F1YXJlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAkc3F1YXJlcy5sZW5ndGgpO1xuICAgIHJldHVybiAkc3F1YXJlcy5lcShyYW5kb21JbmRleCk7XG4gIH07XG5cbiAgLy8gcmFuZG9taXNlIHdoaWNoIGFuaW1hbCB0byBjYWxsIChjdXJyZW5sdHkgb3R0ZXIgb3IgYmVhdmVyKSwgYnV0IHByZWZlciBiZWF2ZXJcbiAgY29uc3QgcmFuZG9tQW5pbWFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDEpICsgMSkgPCAzMCA/ICdvdHRlcicgOiAnYmVhdmVyJztcbiAgfTtcblxuICAvL2FkZCBiZWF2ZXIvb3R0ZXIgY2xhc3MgdG8gcmFuZG9tIHNxdWFyZSwgdGhlbiBjYWxsIGZ1bmN0aW9uIGFnYWluIGF0IGFuIHJhbmRvbSBpbnRlcnZhbCAoYmV0d2VlbiAzIGFuZCAxIHNlY29uZClcbiAgY29uc3Qgc2hvd0FuaW1hbHMgPSBmdW5jdGlvbigpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNlbGVjdFJhbmRvbVNxdWFyZSgpLmFkZFRlbXBvcmFyeUNsYXNzKHJhbmRvbUFuaW1hbCgpLCAxMDAwKTtcbiAgICAgIGRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIDEwMDAgKiAoMi41IC0gMSkgKyAxO1xuICAgICAgLy9vbmx5IHNob3cgYW5pbWFscyBpZiBnYW1lIGhhcyBiZWVuIHN0YXJ0ZWQgYW5kIGNvdW50ZG93biB0aW1lciBoYXMgbm90IHJ1biBvdXRcbiAgICAgIGlmIChnYW1lT24gPT09IHRydWUpIHtcbiAgICAgICAgdGltZVNob3dBbmltYWwgPSAkLm5vdygpO1xuICAgICAgICBzaG93QW5pbWFscygpO1xuICAgICAgfVxuICAgIH0sIGRlbGF5KTtcbiAgfTtcblxuICAvLyBjaGVjayBhbmQgc2hvdyBiYWRnZXMgaWYgcGxheWVyJ3Mgc2NvcmVzIGFyZSBoaWdoIGVub3VnaFxuICBjb25zdCBjaGVja0FuZFNob3dCYWRnZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYmVhdmVyU2NvcmUgPiA1KSB7XG4gICAgICAkYmFkZ2UxLmFkZENsYXNzKCdiYWRnZTEnKTtcbiAgICB9XG4gICAgaWYgKGJlYXZlclNjb3JlID4gMTApIHtcbiAgICAgICRiYWRnZTIuYWRkQ2xhc3MoJ2JhZGdlMicpO1xuICAgIH1cbiAgICBpZiAoYmVhdmVyU2NvcmUgPiAyMCkge1xuICAgICAgJGJhZGdlMy5hZGRDbGFzcygnYmFkZ2UzJyk7XG4gICAgfVxuICAgIGlmIChiZWF2ZXJTY29yZSA+IDUwKSB7XG4gICAgICAkYmFkZ2U0LmFkZENsYXNzKCdiYWRnZTQnKTtcbiAgICB9XG4gICAgaWYgKG90dGVyU2NvcmUgPiA1KSB7XG4gICAgICAkYmFkZ2U1LmFkZENsYXNzKCdiYWRnZTUnKTtcbiAgICB9XG4gICAgaWYgKG90dGVyU2NvcmUgPiAxMCkge1xuICAgICAgJGJhZGdlNi5hZGRDbGFzcygnYmFkZ2U2Jyk7XG4gICAgfVxuICAgIGlmIChibGFua1Njb3JlID4gMTApIHtcbiAgICAgICRiYWRnZTcuYWRkQ2xhc3MoJ2JhZGdlNycpO1xuICAgIH1cbiAgICBpZiAodXNlclNjb3JlID4gaGlnaHNjb3JlKSB7XG4gICAgICAkYmFkZ2U4LmFkZENsYXNzKCdiYWRnZTgnKTtcbiAgICB9XG4gIH07XG5cbiAgLy9nYW1lIGxvZ2ljIGZvciB1c2VyIGNsaWNraW5nIG9uIGJlYXZlcnMvb3R0ZXJzL2VtcHR5IHNxdWFyZVxuICAkZ2FtZWhvbGRlci5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgdXNlckNsaWNrQW5pbWFsID0gJC5ub3coKTtcbiAgICBpZiAoZ2FtZU9uID09PSB0cnVlKSB7XG4gICAgICBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2JlYXZlcicpKSB7XG4gICAgICAgIC8vdXBkYXRlIHNjb3Jlc1xuICAgICAgICBjbGlja1Njb3JlID0gMjA7XG4gICAgICAgIHVzZXJTY29yZSArPSAyMDtcbiAgICAgICAgYmVhdmVyU2NvcmUgKz0gMTtcbiAgICAgICAgLy9zaG93IGJhZGdlc1xuICAgICAgICBjaGVja0FuZFNob3dCYWRnZXMoKTtcbiAgICAgICAgLy9oaWRlIGFuaW1hbCBieSByZW1vdmluZyBjbGFzc1xuICAgICAgICAoJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2JlYXZlcicpKTtcbiAgICAgICAgLy9tYWtlIHNvdW5kIChub3QgaW5jbHVkZWQgeWV0KVxuICAgICAgfSBlbHNlIGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnb3R0ZXInKSkge1xuICAgICAgICBjbGlja1Njb3JlID0gLTEwO1xuICAgICAgICB1c2VyU2NvcmUgLT0gMjA7XG4gICAgICAgIG90dGVyU2NvcmUgKz0gMTtcbiAgICAgICAgY2hlY2tBbmRTaG93QmFkZ2VzKCk7XG4gICAgICAgICgkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnb3R0ZXInKSk7XG4gICAgICAgIC8vbWFrZSBzb3VuZCAobm90IGluY2x1ZGVkIHlldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrU2NvcmUgPSAtNTtcbiAgICAgICAgdXNlclNjb3JlIC09IDU7XG4gICAgICAgIGJsYW5rU2NvcmUgKz0gMTtcbiAgICAgICAgLy9tYWtlIHNvdW5kIChub3QgaW5jbHVkZWQgeWV0KVxuICAgICAgfVxuICAgICAgLy9zaG93IHVzZXJzIGN1cnJlbnQgc2NvcmUsIHJ1bm5pbmcgdG90YWwgYW5kIGNsaWNrIHRpbWVcbiAgICAgICRjbGlja1Njb3JlU2NyZWVuLnRleHQoY2xpY2tTY29yZSk7XG4gICAgICAkdXNlclNjb3JlU2NyZWVuLnRleHQodXNlclNjb3JlKTtcbiAgICAgIC8vc3RvcmUgdXNlcnMgdGltZSBkaWZmZXJlbmNlIGluIGFycmF5XG4gICAgICB1c2VyVGltZUFycmF5LnB1c2goZmluZENsaWNrVGltZSgpKTtcbiAgICAgIC8vc2hvdyBjbGljayB0aW1lIHRvIHVzZXJzXG4gICAgICAkY2xpY2tUaW1lRGlmZmVyZW5jZVNjcmVlbi50ZXh0KGZpbmRDbGlja1RpbWUoKSk7XG4gICAgICAvL2ZpbmQgYW5kIHNob3cgdXNlcnMgZmFzdGVzdCBjbGljayB0aW1lXG4gICAgICAkZmFzdGVzdENsaWNrU2NyZWVuLnRleHQoZmluZFVzZXJGYXN0ZXN0Q0xpY2soKSk7XG4gICAgICAvL2ZpbmQgYW5kIHNob3cgdXNlcnMgYXZlcmFnZSBjbGljayB0aW1lXG4gICAgICAkYXZlcmFnZUNMaWNrU2NyZWVuLnRleHQoZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lKCkpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy9jcmVhdGUgJ2FkZFRlbXBvcmFyeUNsYXNzJyBmdW5jdGlvblxuICAoZnVuY3Rpb24oJCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgIGFkZFRlbXBvcmFyeUNsYXNzOiBmdW5jdGlvbihjbGFzc05hbWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudHMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKGpRdWVyeSk7XG59KTtcbiJdfQ==
