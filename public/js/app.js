"use strict";$(function(){!function(e){e.fn.extend({addTemporaryClass:function(a,t){var n=this;return setTimeout(function(){n.removeClass(a)},t),this.each(function(){e(this).addClass(a)})}})}(jQuery),console.log("Ready.");var e=$(".gameholder"),a=$(".square"),t=$("#play"),n=$("#ready"),r=$("#timerScreen"),s=$(".introduction"),d=$("#play"),c=$("#clickScoreScreen"),o=$("#userScoreScreen"),l=$("#timeDifferenceScreen"),i=$("#fastestClickScreen"),g=$("#averageCLickScreen"),u=$("#highscoreScreen"),b=$("#highscoreFastestClickScreen"),h=$("#highscoreAverageCLickScreen"),f=$(".badge"),C=$("#badge1"),m=$("#badge2"),v=$("#badge3"),S=$("#badge4"),p=$("#badge5"),k=$("#badge6"),y=$("#badge7"),x=$("#badge8"),M=20,T=null,I=200,q=!1,w=0,L=0,j=0,A=0,D=0,F=0,Q=0,R=0,z=0,B=0,E=[],G=0,H=0,J=function(){return B-z},K=function(){return G=Math.min.apply(Math,E)},N=function(){var e=E.reduce(function(e,a){return e+a},0);return H=parseInt(e/E.length)},O=function(){(G<Q||0===Q)&&(Q=G,b.html(Q)),(H<R||0===R)&&(R=H,h.html(R)),w>F&&(F=w,u.html(F)),w=0,L=0,j=0,A=0,L=0,E=[],G=0,H=0,clearInterval(T),M=20,a.removeClass("otter beaver"),f.removeClass("badge1 badge2 badge3 badge4 badge5 badge6 badge7 badge8")};n.on("click",function(){s.addClass("hide")}),d.click(function(){$(this).removeClass("pulse")}),t.on("click",function(){!1===q&&(O(),q=!0,V(),T=setInterval(function(){M--,r.html(M),0===M&&(r.addTemporaryClass("ringing",2e3),clearInterval(T),q=!1)},1e3))});var P=function(){var e=Math.floor(Math.random()*a.length);return a.eq(e)},U=function(){return 99*Math.random()+1<30?"otter":"beaver"},V=function e(){setTimeout(function(){P().addTemporaryClass(U(),1e3),I=1e3*Math.random()*1.5+1,!0===q&&(z=$.now(),e())},I)},W=function(){A>4&&C.addClass("badge1"),A>9&&m.addClass("badge2"),A>14&&v.addClass("badge3"),A>19&&S.addClass("badge4"),w>F&&p.addClass("badge5"),D>9&&k.addClass("badge6"),j>4&&y.addClass("badge7"),j>9&&x.addClass("badge8")};e.on("click",function(e){B=$.now(),q&&($(e.target).hasClass("beaver")?(L=20,w+=20,A+=1,W(),$(e.target).removeClass("beaver")):$(e.target).hasClass("otter")?(L=-10,w-=20,j+=1,W(),$(e.target).removeClass("otter")):(L=-5,w-=5,D+=1),c.text(L),o.text(w),E.push(J()),l.text(J()),i.text(K()),g.text(N()))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJleHRlbmQiLCJhZGRUZW1wb3JhcnlDbGFzcyIsImNsYXNzTmFtZSIsImR1cmF0aW9uIiwidGhpcyIsImVsZW1lbnRzIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwialF1ZXJ5IiwiY29uc29sZSIsIiRzcXVhcmVzIiwiJGdhbWVob2xkZXIiLCIkcGxheSIsIiRyZWFkeSIsIiR0aW1lclNjcmVlbiIsIiRjbGlja1Njb3JlU2NyZWVuIiwiJGNsaWNrVGltZURpZmZlcmVuY2VTY3JlZW4iLCIkZmFzdGVzdENsaWNrU2NyZWVuIiwiJGhpZ2hlc3RzY29yZVNjcmVlbiIsIiRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4iLCIkYmFkZ2VzIiwiJGJhZGdlMSIsIiRiYWRnZTIiLCIkYmFkZ2UzIiwiJGJhZGdlNCIsIiRiYWRnZTUiLCIkYmFkZ2U2IiwiJGJhZGdlNyIsInRpbWVSZW1haW5pbmciLCJ0aW1lcklkIiwiZ2FtZU9uIiwidXNlclNjb3JlIiwiY2xpY2tTY29yZSIsIm90dGVyU2NvcmUiLCJiZWF2ZXJTY29yZSIsImhpZ2hzY29yZSIsImhpZ2hzY29yZUZhc3Rlc3RDbGlja1RpbWUiLCJ0aW1lU2hvd0FuaW1hbCIsInVzZXJUaW1lQXJyYXkiLCJ1c2VyRmFzdGVzdENMaWNrIiwiZmluZENsaWNrVGltZSIsImZpbmRVc2VyRmFzdGVzdENMaWNrIiwiYXBwbHkiLCJmaW5kVXNlckF2ZXJhZ2VDbGlja1RpbWUiLCJzdW0iLCJ1c2VyQXZlcmFnZUNsaWNrVGltZSIsInBhcnNlSW50IiwibGVuZ3RoIiwicmVzZXQiLCJoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lIiwiY2xlYXJJbnRlcnZhbCIsIm9uIiwiYWRkQ2xhc3MiLCIkcGxheUJ1dHRvbiIsImNsaWNrIiwic2hvd0FuaW1hbHMiLCJzZXRJbnRlcnZhbCIsInNlbGVjdFJhbmRvbVNxdWFyZSIsImZsb29yIiwiTWF0aCIsInJhbmRvbUluZGV4IiwicmFuZG9tQW5pbWFsIiwibm93IiwiZGVsYXkiLCJjaGVja0FuZFNob3dCYWRnZXMiLCJibGFua1Njb3JlIiwiJGJhZGdlOCIsImUiLCJ1c2VyQ2xpY2tBbmltYWwiLCJ0YXJnZXQiLCJoYXNDbGFzcyIsInRleHQiLCJwdXNoIiwiJGF2ZXJhZ2VDTGlja1NjcmVlbiJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsWUFHQSxTQUFVQSxHQURWQSxFQUFBQyxHQUFBQyxRQUNDQyxrQkFBWSxTQUFBQyxFQUFBQyxHQUNYLEdBQUtILEdBQU9JLElBSU5DLE9BSEpKLFlBQUFBLFdBQ0VJLEVBQUlBLFlBQUpILElBQ0FJLEdBQ0VELEtBQVNFLEtBQUFBLFdBRFhULEVBRUdLLE1BQUFBLFNBRkhELFNBTURNLFFBRUpDLFFBQUVELElBWkgsU0FjQUMsSUFBQUEsR0FBQVgsRUFBQSxlQUNBWSxFQUFBWixFQUFBLFdBQ01hLEVBQUFBLEVBQUFBLFNBQ0FELEVBQVdaLEVBQUUsVUFDYmMsRUFBUWQsRUFBZCxnQkFDTWUsRUFBV2YsRUFBakIsaUJBQ01nQixFQUFlaEIsRUFBRSxTQUt2QmlCLEVBQUFqQixFQUFBLHFCQUNNaUIsRUFBb0JqQixFQUFFLG9CQUc1QmtCLEVBQUFsQixFQUFBLHlCQUNNa0IsRUFBQUEsRUFBQUEsdUJBQ0FDLEVBQXdCbkIsRUFBQSx1QkFHOUJvQixFQUFBcEIsRUFBQSxvQkFDTW9CLEVBQXdCcEIsRUFBQSxnQ0FDeEJxQixFQUFvQ3JCLEVBQUEsZ0NBRzFDc0IsRUFBQXRCLEVBQUEsVUFDTXNCLEVBQVl0QixFQUFBLFdBQ1p1QixFQUFZdkIsRUFBQSxXQUNad0IsRUFBWXhCLEVBQUEsV0FDWnlCLEVBQVl6QixFQUFBLFdBQ1owQixFQUFZMUIsRUFBQSxXQUNaMkIsRUFBWTNCLEVBQUEsV0FDWjRCLEVBQVk1QixFQUFBLFdBQ1o2QixFQUFZN0IsRUFBQSxXQUdsQjhCLEVBQUEsR0FDSUEsRUFBQUEsS0FDQUMsRUFBQUEsSUFHSkMsR0FBQSxFQUdBQyxFQUFBLEVBQ0lBLEVBQUosRUFDSUMs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LEtBRUF2QixFQUFBc0QsS0FBQTlCLEtBRUFnQyxFQUFBRixLQUFBNUIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG5cbiAgLy9jcmVhdGUgJ2FkZFRlbXBvcmFyeUNsYXNzJyBmdW5jdGlvblxuICAoZnVuY3Rpb24oJCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgIGFkZFRlbXBvcmFyeUNsYXNzOiBmdW5jdGlvbihjbGFzc05hbWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudHMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKGpRdWVyeSk7XG5cbiAgY29uc29sZS5sb2coJ1JlYWR5LicpO1xuICAvL2RlZmluZSBnbG9iYWwgdmFyaWFibGVzXG4gIGNvbnN0ICRnYW1laG9sZGVyID0gJCgnLmdhbWVob2xkZXInKTtcbiAgY29uc3QgJHNxdWFyZXMgPSAkKCcuc3F1YXJlJyk7XG4gIGNvbnN0ICRwbGF5ID0gJCgnI3BsYXknKTtcbiAgY29uc3QgJHJlYWR5ID0gJCgnI3JlYWR5Jyk7XG4gIGNvbnN0ICR0aW1lclNjcmVlbiA9ICQoJyN0aW1lclNjcmVlbicpO1xuICBjb25zdCAkaW50cm9kdWN0aW9uID0gJCgnLmludHJvZHVjdGlvbicpO1xuICBjb25zdCAkcGxheUJ1dHRvbiA9ICQoJyNwbGF5Jyk7XG5cblxuICAvL2dsb2JhbCB2YWlhYmxlcyBmb3IgdXNlciBzY29yZXNcbiAgY29uc3QgJGNsaWNrU2NvcmVTY3JlZW4gPSAkKCcjY2xpY2tTY29yZVNjcmVlbicpO1xuICBjb25zdCAkdXNlclNjb3JlU2NyZWVuID0gJCgnI3VzZXJTY29yZVNjcmVlbicpO1xuXG4gIC8vZ2xvYmFsIHZhaXJhYmxlcyBmb3IgdXNlciBjbGljayB0aW1lc1xuICBjb25zdCAkY2xpY2tUaW1lRGlmZmVyZW5jZVNjcmVlbiA9ICQoJyN0aW1lRGlmZmVyZW5jZVNjcmVlbicpO1xuICBjb25zdCAkZmFzdGVzdENsaWNrU2NyZWVuID0gJCgnI2Zhc3Rlc3RDbGlja1NjcmVlbicpO1xuICBjb25zdCAkYXZlcmFnZUNMaWNrU2NyZWVuID0gJCgnI2F2ZXJhZ2VDTGlja1NjcmVlbicpO1xuXG4gIC8vZ2xvYmFsIHZhcmlhYmxlcyBmb3IgdG9wc2NvcmVzXG4gIGNvbnN0ICRoaWdoZXN0c2NvcmVTY3JlZW4gPSAkKCcjaGlnaHNjb3JlU2NyZWVuJyk7XG4gIGNvbnN0ICRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4gPSAkKCcjaGlnaHNjb3JlRmFzdGVzdENsaWNrU2NyZWVuJyk7XG4gIGNvbnN0ICRoaWdoZXN0c2NvcmVhdmVyYWdlQ0xpY2tTY3JlZW4gPSAkKCcjaGlnaHNjb3JlQXZlcmFnZUNMaWNrU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFyaWFibGVzIGZvciBiYWRnZXNcbiAgY29uc3QgJGJhZGdlcyA9ICQoJy5iYWRnZScpO1xuICBjb25zdCAkYmFkZ2UxID0gJCgnI2JhZGdlMScpO1xuICBjb25zdCAkYmFkZ2UyID0gJCgnI2JhZGdlMicpO1xuICBjb25zdCAkYmFkZ2UzID0gJCgnI2JhZGdlMycpO1xuICBjb25zdCAkYmFkZ2U0ID0gJCgnI2JhZGdlNCcpO1xuICBjb25zdCAkYmFkZ2U1ID0gJCgnI2JhZGdlNScpO1xuICBjb25zdCAkYmFkZ2U2ID0gJCgnI2JhZGdlNicpO1xuICBjb25zdCAkYmFkZ2U3ID0gJCgnI2JhZGdlNycpO1xuICBjb25zdCAkYmFkZ2U4ID0gJCgnI2JhZGdlOCcpO1xuXG4gIC8vIHRpbWVyIGNvbnN0YW50c1xuICBsZXQgdGltZVJlbWFpbmluZyA9IDIwO1xuICBsZXQgdGltZXJJZCA9IG51bGw7XG4gIGxldCBkZWxheSA9IDIwMDtcblxuICAvLyBnYW1lIGxvZ2ljIGNvbnN0YW50c1xuICBsZXQgZ2FtZU9uID0gZmFsc2U7XG5cbiAgLy9nYW1lIHNjb3JlIGNvbnN0YW50c1xuICBsZXQgdXNlclNjb3JlID0gMDtcbiAgbGV0IGNsaWNrU2NvcmUgPSAwO1xuICBsZXQgb3R0ZXJTY29yZSA9IDA7XG4gIGxldCBiZWF2ZXJTY29yZSA9IDA7XG4gIGxldCBibGFua1Njb3JlID0gMDtcblxuICAvL2hpZ2ggc2NvcmUgY29uc3RhbnRzXG4gIGxldCBoaWdoc2NvcmUgPSAwO1xuICBsZXQgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSA9IDA7XG4gIGxldCBoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lID0gMDtcblxuICAvL2NsaWNrIHRpbWUgY29uc3RhbnRzXG4gIGxldCB0aW1lU2hvd0FuaW1hbCA9IDA7XG4gIGxldCB1c2VyQ2xpY2tBbmltYWwgPSAwO1xuICAvLyBsZXQgY2xpY2tUaW1lID0gMDtcbiAgbGV0IHVzZXJUaW1lQXJyYXkgPSBbXTtcbiAgbGV0IHVzZXJGYXN0ZXN0Q0xpY2sgPSAwO1xuICBsZXQgdXNlckF2ZXJhZ2VDbGlja1RpbWUgPSAwO1xuXG4gIC8vZnVuY3Rpb24gdG8gZmluZCBjbGljayB0aW1lXG4gIGNvbnN0IGZpbmRDbGlja1RpbWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKCh1c2VyQ2xpY2tBbmltYWwgLSB0aW1lU2hvd0FuaW1hbCkpO1xuICB9O1xuICAvL2Z1bmN0aW9uIHRvIGZpbmQgdGhlIHBsYXllcnMgZmFzdGVzIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJGYXN0ZXN0Q0xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdXNlclRpbWVBcnJheSk7XG4gICAgcmV0dXJuIHVzZXJGYXN0ZXN0Q0xpY2s7XG4gIH07XG4gIC8vZnVuY3Rpb24gdG8gZmluZCB0aGUgcGxheWVycyBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgc3VtID0gdXNlclRpbWVBcnJheS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH0sIDApO1xuICAgIHVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gcGFyc2VJbnQoc3VtIC8gKHVzZXJUaW1lQXJyYXkubGVuZ3RoKSk7XG4gICAgcmV0dXJuIHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICB9O1xuICAvLyByZXNldCBmdW5jdGlvblxuICBjb25zdCByZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vdXBkYXRlIGZhc3Rlc3QgY2xpY2sgdGltZSBhbmQgZmFzdGVzdCBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyRmFzdGVzdENMaWNrIDwgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSB8fCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID09PSAwKSB7XG4gICAgICBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gdXNlckZhc3Rlc3RDTGljaztcbiAgICAgICRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4uaHRtbChoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lKTtcbiAgICB9XG4gICAgLy91cGRhdGUgZmFzdGVzdCBhdmVyYWdlIGNsaWNrIHRpbWUgYW5kIGZhc3Rlc3QgYXZlcmFnZSBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyQXZlcmFnZUNsaWNrVGltZSA8IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgfHwgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9PT0gMCkge1xuICAgICAgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9IHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICAgICAgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbi5odG1sKGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUpO1xuICAgIH1cbiAgICAvL3VwZGF0ZSBoaWdoc2NvcmUgYW5kIGhpZ2hzY29yZSBzY3JlZW5cbiAgICBpZiAodXNlclNjb3JlID4gaGlnaHNjb3JlKSB7XG4gICAgICBoaWdoc2NvcmUgPSB1c2VyU2NvcmU7XG4gICAgICAkaGlnaGVzdHNjb3JlU2NyZWVuLmh0bWwoaGlnaHNjb3JlKTtcbiAgICB9XG4gICAgLy9yZXNldCBhbGwgc2NvcmVzXG4gICAgdXNlclNjb3JlID0gMDtcbiAgICBjbGlja1Njb3JlID0gMDtcbiAgICBvdHRlclNjb3JlID0gMDtcbiAgICBiZWF2ZXJTY29yZSA9IDA7XG4gICAgY2xpY2tTY29yZSA9IDA7XG4gICAgLy9yZXNldCB1c2VyIGZhc3Rlc3QgYW5kIGF2ZXJhZ2UgY2xpY2sgdGltZVxuICAgIHVzZXJUaW1lQXJyYXkgPSBbXTtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gMDtcbiAgICB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG4gICAgLy9yZXNldCB0aW1lciBhbmQgdXBkYXRlIHRpbWVyIHNjcmVlblxuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgdGltZVJlbWFpbmluZyA9IDIwO1xuICAgIC8vY2xlYXIgZ2FtZSBib2FyZFxuICAgICRzcXVhcmVzLnJlbW92ZUNsYXNzKCdvdHRlciBiZWF2ZXInKTtcbiAgICAvL2NsZWFyIGJhZGdlcyBmcm9tIGJhZGdlIGFyZWFcbiAgICAkYmFkZ2VzLnJlbW92ZUNsYXNzKCdiYWRnZTEgYmFkZ2UyIGJhZGdlMyBiYWRnZTQgYmFkZ2U1IGJhZGdlNiBiYWRnZTcgYmFkZ2U4Jyk7XG4gIH07XG5cbiAgLy9tb3ZlIGZyb20gcmVhZHkgaW50cm9kdWN0aW9uIHNjcmVlbiB0byBnYW1lICdyZWFkeScgYnV0dG9uIGlzIGNsaWNrZWRcbiAgJHJlYWR5Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICRpbnRyb2R1Y3Rpb24uYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgfSk7XG5cbiAgLy9wdWxzZSBidXR0b25cbiAgJHBsYXlCdXR0b24uY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygncHVsc2UnKTtcbiAgfSk7XG5cbiAgLy9zdGFydCBnYW1lIHdoZW4gJ3N0YXJ0IGJ1dHRvbicgaXMgcHVzaGVkLCBvbmx5IGlmIGdhbWUgbm90IHN0YXJ0ZWRcbiAgJHBsYXkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKGdhbWVPbiA9PT0gZmFsc2UpIHtcbiAgICAgIC8vcmVzZXQgZ2FtZVxuICAgICAgcmVzZXQoKTtcbiAgICAgIC8vc3RvcmUgdGhhdCBnYW1lIGhhcyBiZWVuIHN0YXJ0ZWRcbiAgICAgIGdhbWVPbiA9IHRydWU7XG4gICAgICAvL3J1biBmdW5jdGlvbiB0byBzaG93IGJlYXZlcnMgYW5kIG90dGVycyBmb3IgdGltZSBpbnRlcnZhbFxuICAgICAgc2hvd0FuaW1hbHMoKTtcbiAgICAgIC8vc3RhcnQgdGltZXJcbiAgICAgIHRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRpbWVSZW1haW5pbmctLTtcbiAgICAgICAgJHRpbWVyU2NyZWVuLmh0bWwodGltZVJlbWFpbmluZyk7XG4gICAgICAgIC8vIHdoZW4gdGltZXIgcmVhY2hlcyB6ZXJvIHN0b3AgZ2FtZVxuICAgICAgICBpZiAodGltZVJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICR0aW1lclNjcmVlbi5hZGRUZW1wb3JhcnlDbGFzcygncmluZ2luZycsIDIwMDApO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgICAgICAgZ2FtZU9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy9zZWxlY3QgcmFuZG9tIHNxdWFyZVxuICBjb25zdCBzZWxlY3RSYW5kb21TcXVhcmUgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICRzcXVhcmVzLmxlbmd0aCk7XG4gICAgcmV0dXJuICRzcXVhcmVzLmVxKHJhbmRvbUluZGV4KTtcbiAgfTtcblxuICAvLyByYW5kb21pc2Ugd2hpY2ggYW5pbWFsIHRvIGNhbGwgKGN1cnJlbmx0eSBvdHRlciBvciBiZWF2ZXIpLCBidXQgcHJlZmVyIGJlYXZlclxuICBjb25zdCByYW5kb21BbmltYWwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgKiAoMTAwIC0gMSkgKyAxKSA8IDMwID8gJ290dGVyJyA6ICdiZWF2ZXInO1xuICB9O1xuXG4gIC8vYWRkIGJlYXZlci9vdHRlciBjbGFzcyB0byByYW5kb20gc3F1YXJlLCB0aGVuIGNhbGwgZnVuY3Rpb24gYWdhaW4gYXQgYW4gcmFuZG9tIGludGVydmFsIChiZXR3ZWVuIDMgYW5kIDEgc2Vjb25kKVxuICBjb25zdCBzaG93QW5pbWFscyA9IGZ1bmN0aW9uKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2VsZWN0UmFuZG9tU3F1YXJlKCkuYWRkVGVtcG9yYXJ5Q2xhc3MocmFuZG9tQW5pbWFsKCksIDEwMDApO1xuICAgICAgZGVsYXkgPSBNYXRoLnJhbmRvbSgpICogMTAwMCAqICgyLjUgLSAxKSArIDE7XG4gICAgICAvL29ubHkgc2hvdyBhbmltYWxzIGlmIGdhbWUgaGFzIGJlZW4gc3RhcnRlZCBhbmQgY291bnRkb3duIHRpbWVyIGhhcyBub3QgcnVuIG91dFxuICAgICAgaWYgKGdhbWVPbiA9PT0gdHJ1ZSkge1xuICAgICAgICB0aW1lU2hvd0FuaW1hbCA9ICQubm93KCk7XG4gICAgICAgIHNob3dBbmltYWxzKCk7XG4gICAgICB9XG4gICAgfSwgZGVsYXkpO1xuICB9O1xuXG4gIC8vIGNoZWNrIGFuZCBzaG93IGJhZGdlcyBpZiBwbGF5ZXIncyBzY29yZXMgYXJlIGhpZ2ggZW5vdWdoXG4gIGNvbnN0IGNoZWNrQW5kU2hvd0JhZGdlcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChiZWF2ZXJTY29yZSA+IDQpIHtcbiAgICAgICRiYWRnZTEuYWRkQ2xhc3MoJ2JhZGdlMScpO1xuICAgIH1cbiAgICBpZiAoYmVhdmVyU2NvcmUgPiA5KSB7XG4gICAgICAkYmFkZ2UyLmFkZENsYXNzKCdiYWRnZTInKTtcbiAgICB9XG4gICAgaWYgKGJlYXZlclNjb3JlID4gMTQpIHtcbiAgICAgICRiYWRnZTMuYWRkQ2xhc3MoJ2JhZGdlMycpO1xuICAgIH1cbiAgICBpZiAoYmVhdmVyU2NvcmUgPiAxOSkge1xuICAgICAgJGJhZGdlNC5hZGRDbGFzcygnYmFkZ2U0Jyk7XG4gICAgfVxuICAgIGlmICh1c2VyU2NvcmUgPiBoaWdoc2NvcmUpIHtcbiAgICAgICRiYWRnZTUuYWRkQ2xhc3MoJ2JhZGdlNScpO1xuICAgIH1cbiAgICBpZiAoYmxhbmtTY29yZSA+IDkpIHtcbiAgICAgICRiYWRnZTYuYWRkQ2xhc3MoJ2JhZGdlNicpO1xuICAgIH1cbiAgICBpZiAob3R0ZXJTY29yZSA+IDQpIHtcbiAgICAgICRiYWRnZTcuYWRkQ2xhc3MoJ2JhZGdlNycpO1xuICAgIH1cbiAgICBpZiAob3R0ZXJTY29yZSA+IDkpIHtcbiAgICAgICRiYWRnZTguYWRkQ2xhc3MoJ2JhZGdlOCcpO1xuICAgIH1cbiAgfTtcblxuICAvL2dhbWUgbG9naWMgZm9yIHVzZXIgY2xpY2tpbmcgb24gYmVhdmVycy9vdHRlcnMvZW1wdHkgc3F1YXJlXG4gICRnYW1laG9sZGVyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICB1c2VyQ2xpY2tBbmltYWwgPSAkLm5vdygpO1xuICAgIGlmIChnYW1lT24pIHtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnYmVhdmVyJykpIHtcbiAgICAgICAgLy91cGRhdGUgc2NvcmVzXG4gICAgICAgIGNsaWNrU2NvcmUgPSAyMDtcbiAgICAgICAgdXNlclNjb3JlICs9IDIwO1xuICAgICAgICBiZWF2ZXJTY29yZSArPSAxO1xuICAgICAgICAvL3Nob3cgYmFkZ2VzXG4gICAgICAgIGNoZWNrQW5kU2hvd0JhZGdlcygpO1xuICAgICAgICAvL2hpZGUgYW5pbWFsIGJ5IHJlbW92aW5nIGNsYXNzXG4gICAgICAgICgkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnYmVhdmVyJykpO1xuICAgICAgICAvL21ha2Ugc291bmQgKG5vdCBpbmNsdWRlZCB5ZXQpXG4gICAgICB9IGVsc2UgaWYgKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdvdHRlcicpKSB7XG4gICAgICAgIGNsaWNrU2NvcmUgPSAtMTA7XG4gICAgICAgIHVzZXJTY29yZSAtPSAyMDtcbiAgICAgICAgb3R0ZXJTY29yZSArPSAxO1xuICAgICAgICBjaGVja0FuZFNob3dCYWRnZXMoKTtcbiAgICAgICAgKCQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdvdHRlcicpKTtcbiAgICAgICAgLy9tYWtlIHNvdW5kIChub3QgaW5jbHVkZWQgeWV0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xpY2tTY29yZSA9IC01O1xuICAgICAgICB1c2VyU2NvcmUgLT0gNTtcbiAgICAgICAgYmxhbmtTY29yZSArPSAxO1xuICAgICAgICAvL21ha2Ugc291bmQgKG5vdCBpbmNsdWRlZCB5ZXQpXG4gICAgICB9XG4gICAgICAvL3Nob3cgdXNlcnMgY3VycmVudCBzY29yZSwgcnVubmluZyB0b3RhbCBhbmQgY2xpY2sgdGltZVxuICAgICAgJGNsaWNrU2NvcmVTY3JlZW4udGV4dChjbGlja1Njb3JlKTtcbiAgICAgICR1c2VyU2NvcmVTY3JlZW4udGV4dCh1c2VyU2NvcmUpO1xuICAgICAgLy9zdG9yZSB1c2VycyB0aW1lIGRpZmZlcmVuY2UgaW4gYXJyYXlcbiAgICAgIHVzZXJUaW1lQXJyYXkucHVzaChmaW5kQ2xpY2tUaW1lKCkpO1xuICAgICAgLy9zaG93IGNsaWNrIHRpbWUgdG8gdXNlcnNcbiAgICAgICRjbGlja1RpbWVEaWZmZXJlbmNlU2NyZWVuLnRleHQoZmluZENsaWNrVGltZSgpKTtcbiAgICAgIC8vZmluZCBhbmQgc2hvdyB1c2VycyBmYXN0ZXN0IGNsaWNrIHRpbWVcbiAgICAgICRmYXN0ZXN0Q2xpY2tTY3JlZW4udGV4dChmaW5kVXNlckZhc3Rlc3RDTGljaygpKTtcbiAgICAgIC8vZmluZCBhbmQgc2hvdyB1c2VycyBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgICAgICRhdmVyYWdlQ0xpY2tTY3JlZW4udGV4dChmaW5kVXNlckF2ZXJhZ2VDbGlja1RpbWUoKSk7XG4gICAgfVxuICB9KTtcbn0pO1xuIl19
