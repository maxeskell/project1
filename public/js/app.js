"use strict";$(function(){console.log("Ready.");var e=$(".gameholder"),a=$(".square"),t=$("#play"),n=$("#ready"),r=$("#timerScreen"),s=$(".introduction"),d=$("#play"),c=$("#clickScoreScreen"),o=$("#userScoreScreen"),l=$("#timeDifferenceScreen"),i=$("#fastestClickScreen"),g=$("#averageCLickScreen"),u=$("#highscoreScreen"),b=$("#highscoreFastestClickScreen"),h=$("#highscoreAverageCLickScreen"),f=$(".badge"),C=$("#badge1"),m=$("#badge2"),v=$("#badge3"),S=$("#badge4"),p=$("#badge5"),y=$("#badge6"),k=$("#badge7"),x=$("#badge8"),M=20,T=null,I=200,w=!1,q=0,L=0,j=0,A=0,D=0,F=0,Q=0,R=0,z=0,B=0,E=0,G=[],H=0,J=0,K=function(){return E=B-z},N=function(){return H=Math.min.apply(Math,G)},O=function(){var e=G.reduce(function(e,a){return e+a},0);return J=parseInt(e/G.length)},P=function(){(H<Q||0===Q)&&(Q=H,b.html(Q)),(J<R||0===R)&&(R=J,h.html(R)),q>F&&(F=q,u.html(F)),q=0,L=0,j=0,A=0,L=0,G=[],H=0,J=0,clearInterval(T),M=20,a.removeClass("otter beaver"),f.removeClass("badge1 badge2 badge3 badge4 badge5 badge6 badge7 badge8")};n.on("click",function(){s.addClass("hide")}),$.when($.ready).then(function(){d.click(function(){d.removeClass("pulse")})}),t.on("click",function(){!1===w&&(P(),w=!0,W(),T=setInterval(function(){M--,r.html(M),0===M&&(r.addTemporaryClass("ringing",2e3),clearInterval(T),w=!1)},1e3))});var U=function(){var e=Math.floor(Math.random()*a.length);return a.eq(e)},V=function(){return 99*Math.random()+1<30?"otter":"beaver"},W=function e(){setTimeout(function(){U().addTemporaryClass(V(),1e3),I=1e3*Math.random()*1.5+1,!0===w&&(z=$.now(),e())},I)},X=function(){A>4&&C.addClass("badge1"),A>9&&m.addClass("badge2"),A>14&&v.addClass("badge3"),A>19&&S.addClass("badge4"),q>F&&p.addClass("badge5"),D>9&&y.addClass("badge6"),j>4&&k.addClass("badge7"),j>9&&x.addClass("badge8")};e.on("click",function(e){B=$.now(),!0===w&&($(e.target).hasClass("beaver")?(L=20,q+=20,A+=1,X(),$(e.target).removeClass("beaver")):$(e.target).hasClass("otter")?(L=-10,q-=20,j+=1,X(),$(e.target).removeClass("otter")):(L=-5,q-=5,D+=1),c.text(L),o.text(q),G.push(K()),l.text(K()),i.text(N()),g.text(O()))}),function(e){e.fn.extend({addTemporaryClass:function(a,t){var n=this;return setTimeout(function(){n.removeClass(a)},t),this.each(function(){e(this).addClass(a)})}})}(jQuery)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsIiRzcXVhcmVzIiwiJGdhbWVob2xkZXIiLCIkcGxheSIsIiRyZWFkeSIsIiR0aW1lclNjcmVlbiIsIiRjbGlja1Njb3JlU2NyZWVuIiwiJGNsaWNrVGltZURpZmZlcmVuY2VTY3JlZW4iLCIkZmFzdGVzdENsaWNrU2NyZWVuIiwiJGhpZ2hlc3RzY29yZVNjcmVlbiIsIiRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4iLCIkYmFkZ2VzIiwiJGJhZGdlMSIsIiRiYWRnZTIiLCIkYmFkZ2UzIiwiJGJhZGdlNCIsIiRiYWRnZTUiLCIkYmFkZ2U2IiwiJGJhZGdlNyIsInRpbWVSZW1haW5pbmciLCJ0aW1lcklkIiwiZ2FtZU9uIiwidXNlclNjb3JlIiwiY2xpY2tTY29yZSIsIm90dGVyU2NvcmUiLCJiZWF2ZXJTY29yZSIsImhpZ2hzY29yZSIsImhpZ2hzY29yZUZhc3Rlc3RDbGlja1RpbWUiLCJ0aW1lU2hvd0FuaW1hbCIsInVzZXJDbGlja0FuaW1hbCIsImNsaWNrVGltZSIsInVzZXJUaW1lQXJyYXkiLCJ1c2VyRmFzdGVzdENMaWNrIiwiZmluZENsaWNrVGltZSIsImZpbmRVc2VyRmFzdGVzdENMaWNrIiwiYXBwbHkiLCJmaW5kVXNlckF2ZXJhZ2VDbGlja1RpbWUiLCJzdW0iLCJ1c2VyQXZlcmFnZUNsaWNrVGltZSIsInBhcnNlSW50IiwibGVuZ3RoIiwicmVzZXQiLCJoaWdoc2NvcmVBdmVyYWdlQ2xpY2tUaW1lIiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwib24iLCJhZGRDbGFzcyIsIndoZW4iLCJyZWFkeSIsInRoZW4iLCJjbGljayIsIiRwbGF5QnV0dG9uIiwic2hvd0FuaW1hbHMiLCJzZXRJbnRlcnZhbCIsImFkZFRlbXBvcmFyeUNsYXNzIiwic2VsZWN0UmFuZG9tU3F1YXJlIiwiZmxvb3IiLCJNYXRoIiwicmFuZG9tSW5kZXgiLCJyYW5kb21BbmltYWwiLCJzZXRUaW1lb3V0Iiwibm93IiwiZGVsYXkiLCJjaGVja0FuZFNob3dCYWRnZXMiLCJibGFua1Njb3JlIiwiJGJhZGdlOCIsImUiLCJoYXNDbGFzcyIsInRhcmdldCIsInRleHQiLCJwdXNoIiwiJGF2ZXJhZ2VDTGlja1NjcmVlbiIsImZuIiwiZXh0ZW5kIiwiY2xhc3NOYW1lIiwiZHVyYXRpb24iLCJlbGVtZW50cyIsImVhY2giLCJ0aGlzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiWUFBQUEsR0FBRSxXQUNBQyxRQUFRQyxJQUFJLFNBQVpELElBQUFBLEdBQUFELEVBQUEsZUFDQUcsRUFBQUgsRUFBQSxXQUNNSSxFQUFBQSxFQUFBQSxTQUNBRCxFQUFXSCxFQUFFLFVBQ2JLLEVBQVFMLEVBQWQsZ0JBQ01NLEVBQVdOLEVBQWpCLGlCQUNNTyxFQUFlUCxFQUFFLFNBS3ZCUSxFQUFBUixFQUFBLHFCQUNNUSxFQUFvQlIsRUFBRSxvQkFHNUJTLEVBQUFULEVBQUEseUJBQ01TLEVBQUFBLEVBQUFBLHVCQUNBQyxFQUF3QlYsRUFBQSx1QkFHOUJXLEVBQUFYLEVBQUEsb0JBQ01XLEVBQXdCWCxFQUFBLGdDQUN4QlksRUFBb0NaLEVBQUEsZ0NBRzFDYSxFQUFBYixFQUFBLFVBQ01hLEVBQVliLEVBQUEsV0FDWmMsRUFBWWQsRUFBQSxXQUNaZSxFQUFZZixFQUFBLFdBQ1pnQixFQUFZaEIsRUFBQSxXQUNaaUIsRUFBWWpCLEVBQUEsV0FDWmtCLEVBQVlsQixFQUFBLFdBQ1ptQixFQUFZbkIsRUFBQSxXQUNab0IsRUFBWXBCLEVBQUEsV0FHbEJxQixFQUFBLEdBQ0lBLEVBQUFBLEtBQ0FDLEVBQUFBLElBR0pDLEdBQUEsRUFHQUMsRUFBQSxFQUNJQSxFQUFKLEVBQ0lDLEVBQWEsRUFDYkMsRUFBSixFQUNJQyxFQUFBQSxFQUdKQyxFQUFBLEVBQ0lBLEVBQUosRUFDSUMsRUFBNEIsRUFHaENDLEVBQUEsRUFDSUEsRUFBSixFQUNJQyxFQUFBQSxFQUNBQyxLQUNBQyxFQUFKLEVBQ0lDLEVBQUosRUFHQUMsRUFBQSxXQUVFSCxNQURGQSxHQUFNRyxFQUFBQSxHQUlOQyxFQUFBLFdBRUVGLE1BREZBLEdBQU1FLEtBQUFBLElBQXVCQyxNQUF2QkQsS0FBQUEsSUFJTkUsRUFBQSxXQUNBLEdBQU1BLEdBQUFBLEVBQUFBLE9BQTJCLFNBQTNCQSxFQUFBQSxHQUNKLE1BQU1DLEdBQU1OLEdBQ1YsRUFFRk8sT0FEQ0EsR0FGREMsU0FBQUYsRUFBQU4sRUFBQVMsU0FNRkMsRUFBQSxZQUVFVCxFQUFBTCxHQUFBLElBQUFBLEtBQ0FBLEVBQXVCQSxFQUNyQkEsRUFBNEJLLEtBQUFBLEtBRzlCTSxFQUFBSSxHQUFBLElBQUFBLEtBQ0FBLEVBQTJCQSxFQUN6QkEsRUFBNEJKLEtBQUFBLElBRzlCaEIsRUFBQUksSUFDQUEsRUFBSUosRUFDRkksRUFBWUosS0FBWkksSUFHRkosRUFBQSxFQUNBQSxFQUFBLEVBQ0FDLEVBQWEsRUFDYkMsRUFBQSxFQUNBQyxFQUFBQSxFQUVBTSxLQUNBQSxFQUFBLEVBQ0FDLEVBQUEsRUFFQVcsY0FBQXZCLEdBQ0F1QixFQUFjdkIsR0FFZG5CLEVBQUEyQyxZQUFBLGdCQUVBakMsRUFBQWlDLFlBQUEsMkRBSUZ4QyxHQUFBeUMsR0FBQSxRQUFBLFdBQ0F6QyxFQUFVMEMsU0FBUyxVQUluQmhELEVBQUFpRCxLQUFBakQsRUFBQWtELE9BQUFDLEtBQUEsV0FDRUYsRUFBRkcsTUFBQSxXQUNFQyxFQUFZRCxZQUFNLGFBS3BCL0MsRUFBQTBDLEdBQUEsUUFBQSxZQUNBLElBQU1BLElBRUZKLElBRUFwQixHQUFBLEVBRUErQixJQUVBaEMsRUFBQWlDLFlBQUEsV0FDQWpDLElBQ0VELEVBQUFBLEtBQUFBLEdBRUEsSUFBQUEsSUFDQWQsRUFBSWMsa0JBQXFCLFVBQUEsS0FDdkJkLGNBQWFpRCxHQUNiWCxHQUFBQSxJQUVELE9BS1AsSUFBQVksR0FBQSxXQUNBLEdBQU1BLEdBQUFBLEtBQXFCQyxNQUFBQyxLQUFyQkYsU0FBQUEsRUFBZ0NmLE9BQ3BDLE9BQU1rQixHQUFBQSxHQUFjRCxJQUl0QkUsRUFBQSxXQUNBLE1BQU1BLElBQUFBLEtBQUFBLFNBQUFBLEVBQTBCLEdBQUEsUUFBQSxVQUloQ1AsRUFBQSxRQUFBQSxLQUNBUSxXQUFNUixXQUNKUSxJQUFpQk4sa0JBQUFLLElBQUEsS0FDZkosRUFBcUJELElBQXJCQyxLQUFBQSxTQUFBQSxJQUF1Q0ksR0FFdkMsSUFBQXRDLElBQ0FPLEVBQUE5QixFQUFxQitELE1BQ25CakMsTUFFRGtDLElBSUxDLEVBQUEsV0FDTUEsRUFBQUEsR0FDSm5ELEVBQUlhLFNBQUosVUFFQ0EsRUFBQSxHQUNEWixFQUFJWSxTQUFKLFVBRUNBLEVBQUEsSUFDRFgsRUFBSVcsU0FBYyxVQUVqQkEsRUFBQSxJQUNEVixFQUFJVSxTQUFjLFVBRWpCSCxFQUFBSSxHQUNEVixFQUFJTSxTQUFZSSxVQUVmc0MsRUFBQSxHQUNEL0MsRUFBSStDLFNBQUosVUFFQ3hDLEVBQUEsR0FDRE4sRUFBSU0sU0FBSixVQUVDQSxFQUFBLEdBQ0R5QyxFQUFJekMsU0FBSixVQUtGdEIsR0FBQTJDLEdBQUEsUUFBQSxTQUFBcUIsR0FDQWhFLEVBQWVKLEVBQWYrRCxPQUNFaEMsSUFBQUEsSUFDSVIsRUFBQUEsRUFBQUEsUUFBVzhDLFNBQU0sV0FFakI1QyxFQUFBLEdBQ0FBLEdBQWEsR0FDYkQsR0FBQSxFQUVBeUMsSUFFQWpFLEVBQUFvRSxFQUFBRSxRQUFBeEIsWUFBQSxXQUVBOUMsRUFBQW9FLEVBQUFFLFFBQUFELFNBQUEsVUFURjVDLEdBVWU2QyxHQUNiN0MsR0FBYSxHQUNiRCxHQUFhLEVBQ2JFLElBQ0F1QyxFQUFBQSxFQUFBQSxRQUFBQSxZQUFBQSxXQUpLeEMsR0FPQSxFQUNMQSxHQUFhLEVBQ2JELEdBQUEsR0FJRmhCLEVBQUErRCxLQUFBOUMsR0FDQWpCLEVBQUFBLEtBQUFnQixHQUVBUyxFQUFBdUMsS0FBQXJDLEtBRUExQixFQUFBOEQsS0FBQXBDLEtBRUF6QixFQUFBNkQsS0FBQW5DLEtBRUFxQyxFQUFBRixLQUFBakMsUUFLSixTQUFBdEMsR0FDQ0EsRUFBQTBFLEdBQUFDLFFBQ0dELGtCQUFVLFNBQUFFLEVBQUFDLEdBQ1ZyQixHQUFBQSxHQUFBQSxJQUlHLE9BSERNLFlBQUlnQixXQUNKaEIsRUFBV2hCLFlBQVc4QixJQUNwQkUsR0FDQ0QsS0FGSEUsS0FBQSxXQUdBL0UsRUFBQWdGLE1BQU9oQyxTQUFVNEIsU0FOckJLIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBjb25zb2xlLmxvZygnUmVhZHkuJyk7XG4gIC8vZGVmaW5lIGdsb2JhbCB2YXJpYWJsZXNcbiAgY29uc3QgJGdhbWVob2xkZXIgPSAkKCcuZ2FtZWhvbGRlcicpO1xuICBjb25zdCAkc3F1YXJlcyA9ICQoJy5zcXVhcmUnKTtcbiAgY29uc3QgJHBsYXkgPSAkKCcjcGxheScpO1xuICBjb25zdCAkcmVhZHkgPSAkKCcjcmVhZHknKTtcbiAgY29uc3QgJHRpbWVyU2NyZWVuID0gJCgnI3RpbWVyU2NyZWVuJyk7XG4gIGNvbnN0ICRpbnRyb2R1Y3Rpb24gPSAkKCcuaW50cm9kdWN0aW9uJyk7XG4gIGNvbnN0ICRwbGF5QnV0dG9uID0gJCgnI3BsYXknKTtcblxuXG4gIC8vZ2xvYmFsIHZhaWFibGVzIGZvciB1c2VyIHNjb3Jlc1xuICBjb25zdCAkY2xpY2tTY29yZVNjcmVlbiA9ICQoJyNjbGlja1Njb3JlU2NyZWVuJyk7XG4gIGNvbnN0ICR1c2VyU2NvcmVTY3JlZW4gPSAkKCcjdXNlclNjb3JlU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFpcmFibGVzIGZvciB1c2VyIGNsaWNrIHRpbWVzXG4gIGNvbnN0ICRjbGlja1RpbWVEaWZmZXJlbmNlU2NyZWVuID0gJCgnI3RpbWVEaWZmZXJlbmNlU2NyZWVuJyk7XG4gIGNvbnN0ICRmYXN0ZXN0Q2xpY2tTY3JlZW4gPSAkKCcjZmFzdGVzdENsaWNrU2NyZWVuJyk7XG4gIGNvbnN0ICRhdmVyYWdlQ0xpY2tTY3JlZW4gPSAkKCcjYXZlcmFnZUNMaWNrU2NyZWVuJyk7XG5cbiAgLy9nbG9iYWwgdmFyaWFibGVzIGZvciB0b3BzY29yZXNcbiAgY29uc3QgJGhpZ2hlc3RzY29yZVNjcmVlbiA9ICQoJyNoaWdoc2NvcmVTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZUZhc3Rlc3RDbGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4nKTtcbiAgY29uc3QgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbiA9ICQoJyNoaWdoc2NvcmVBdmVyYWdlQ0xpY2tTY3JlZW4nKTtcblxuICAvL2dsb2JhbCB2YXJpYWJsZXMgZm9yIGJhZGdlc1xuICBjb25zdCAkYmFkZ2VzID0gJCgnLmJhZGdlJyk7XG4gIGNvbnN0ICRiYWRnZTEgPSAkKCcjYmFkZ2UxJyk7XG4gIGNvbnN0ICRiYWRnZTIgPSAkKCcjYmFkZ2UyJyk7XG4gIGNvbnN0ICRiYWRnZTMgPSAkKCcjYmFkZ2UzJyk7XG4gIGNvbnN0ICRiYWRnZTQgPSAkKCcjYmFkZ2U0Jyk7XG4gIGNvbnN0ICRiYWRnZTUgPSAkKCcjYmFkZ2U1Jyk7XG4gIGNvbnN0ICRiYWRnZTYgPSAkKCcjYmFkZ2U2Jyk7XG4gIGNvbnN0ICRiYWRnZTcgPSAkKCcjYmFkZ2U3Jyk7XG4gIGNvbnN0ICRiYWRnZTggPSAkKCcjYmFkZ2U4Jyk7XG5cbiAgLy8gdGltZXIgY29uc3RhbnRzXG4gIGxldCB0aW1lUmVtYWluaW5nID0gMjA7XG4gIGxldCB0aW1lcklkID0gbnVsbDtcbiAgbGV0IGRlbGF5ID0gMjAwO1xuXG4gIC8vIGdhbWUgbG9naWMgY29uc3RhbnRzXG4gIGxldCBnYW1lT24gPSBmYWxzZTtcblxuICAvL2dhbWUgc2NvcmUgY29uc3RhbnRzXG4gIGxldCB1c2VyU2NvcmUgPSAwO1xuICBsZXQgY2xpY2tTY29yZSA9IDA7XG4gIGxldCBvdHRlclNjb3JlID0gMDtcbiAgbGV0IGJlYXZlclNjb3JlID0gMDtcbiAgbGV0IGJsYW5rU2NvcmUgPSAwO1xuXG4gIC8vaGlnaCBzY29yZSBjb25zdGFudHNcbiAgbGV0IGhpZ2hzY29yZSA9IDA7XG4gIGxldCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gMDtcbiAgbGV0IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgPSAwO1xuXG4gIC8vY2xpY2sgdGltZSBjb25zdGFudHNcbiAgbGV0IHRpbWVTaG93QW5pbWFsID0gMDtcbiAgbGV0IHVzZXJDbGlja0FuaW1hbCA9IDA7XG4gIGxldCBjbGlja1RpbWUgPSAwO1xuICBsZXQgdXNlclRpbWVBcnJheSA9IFtdO1xuICBsZXQgdXNlckZhc3Rlc3RDTGljayA9IDA7XG4gIGxldCB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG5cbiAgLy9mdW5jdGlvbiB0byBmaW5kIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZENsaWNrVGltZSA9IGZ1bmN0aW9uKCkge1xuICAgIGNsaWNrVGltZSA9ICgodXNlckNsaWNrQW5pbWFsIC0gdGltZVNob3dBbmltYWwpKTtcbiAgICByZXR1cm4gY2xpY2tUaW1lO1xuICB9O1xuICAvL2Z1bmN0aW9uIHRvIGZpbmQgdGhlIHBsYXllcnMgZmFzdGVzIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJGYXN0ZXN0Q0xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgdXNlclRpbWVBcnJheSk7XG4gICAgcmV0dXJuIHVzZXJGYXN0ZXN0Q0xpY2s7XG4gIH07XG4gIC8vZnVuY3Rpb24gdG8gZmluZCB0aGUgcGxheWVycyBhdmVyYWdlIGNsaWNrIHRpbWVcbiAgY29uc3QgZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgc3VtID0gdXNlclRpbWVBcnJheS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgICAgcmV0dXJuIGEgKyBiO1xuICAgIH0sIDApO1xuICAgIHVzZXJBdmVyYWdlQ2xpY2tUaW1lID0gcGFyc2VJbnQoc3VtIC8gKHVzZXJUaW1lQXJyYXkubGVuZ3RoKSk7XG4gICAgcmV0dXJuIHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICB9O1xuICAvLyByZXNldCBmdW5jdGlvblxuICBjb25zdCByZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vdXBkYXRlIGZhc3Rlc3QgY2xpY2sgdGltZSBhbmQgZmFzdGVzdCBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyRmFzdGVzdENMaWNrIDwgaGlnaHNjb3JlRmFzdGVzdENsaWNrVGltZSB8fCBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID09PSAwKSB7XG4gICAgICBoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lID0gdXNlckZhc3Rlc3RDTGljaztcbiAgICAgICRoaWdoZXN0c2NvcmVGYXN0ZXN0Q2xpY2tTY3JlZW4uaHRtbChoaWdoc2NvcmVGYXN0ZXN0Q2xpY2tUaW1lKTtcbiAgICB9XG4gICAgLy91cGRhdGUgZmFzdGVzdCBhdmVyYWdlIGNsaWNrIHRpbWUgYW5kIGZhc3Rlc3QgYXZlcmFnZSBjbGljayB0aW1lIHNjcmVlblxuICAgIGlmICh1c2VyQXZlcmFnZUNsaWNrVGltZSA8IGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUgfHwgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9PT0gMCkge1xuICAgICAgaGlnaHNjb3JlQXZlcmFnZUNsaWNrVGltZSA9IHVzZXJBdmVyYWdlQ2xpY2tUaW1lO1xuICAgICAgJGhpZ2hlc3RzY29yZWF2ZXJhZ2VDTGlja1NjcmVlbi5odG1sKGhpZ2hzY29yZUF2ZXJhZ2VDbGlja1RpbWUpO1xuICAgIH1cbiAgICAvL3VwZGF0ZSBoaWdoc2NvcmUgYW5kIGhpZ2hzY29yZSBzY3JlZW5cbiAgICBpZiAodXNlclNjb3JlID4gaGlnaHNjb3JlKSB7XG4gICAgICBoaWdoc2NvcmUgPSB1c2VyU2NvcmU7XG4gICAgICAkaGlnaGVzdHNjb3JlU2NyZWVuLmh0bWwoaGlnaHNjb3JlKTtcbiAgICB9XG4gICAgLy9yZXNldCBhbGwgc2NvcmVzXG4gICAgdXNlclNjb3JlID0gMDtcbiAgICBjbGlja1Njb3JlID0gMDtcbiAgICBvdHRlclNjb3JlID0gMDtcbiAgICBiZWF2ZXJTY29yZSA9IDA7XG4gICAgY2xpY2tTY29yZSA9IDA7XG4gICAgLy9yZXNldCB1c2VyIGZhc3Rlc3QgYW5kIGF2ZXJhZ2UgY2xpY2sgdGltZVxuICAgIHVzZXJUaW1lQXJyYXkgPSBbXTtcbiAgICB1c2VyRmFzdGVzdENMaWNrID0gMDtcbiAgICB1c2VyQXZlcmFnZUNsaWNrVGltZSA9IDA7XG4gICAgLy9yZXNldCB0aW1lciBhbmQgdXBkYXRlIHRpbWVyIHNjcmVlblxuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XG4gICAgdGltZVJlbWFpbmluZyA9IDIwO1xuICAgIC8vY2xlYXIgZ2FtZSBib2FyZFxuICAgICRzcXVhcmVzLnJlbW92ZUNsYXNzKCdvdHRlciBiZWF2ZXInKTtcbiAgICAvL2NsZWFyIGJhZGdlcyBmcm9tIGJhZGdlIGFyZWFcbiAgICAkYmFkZ2VzLnJlbW92ZUNsYXNzKCdiYWRnZTEgYmFkZ2UyIGJhZGdlMyBiYWRnZTQgYmFkZ2U1IGJhZGdlNiBiYWRnZTcgYmFkZ2U4Jyk7XG4gIH07XG5cbiAgLy9tb3ZlIGZyb20gcmVhZHkgaW50cm9kdWN0aW9uIHNjcmVlbiB0byBnYW1lICdyZWFkeScgYnV0dG9uIGlzIGNsaWNrZWRcbiAgJHJlYWR5Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICRpbnRyb2R1Y3Rpb24uYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgfSk7XG5cbiAgLy9wdWxzZSBidXR0b25cbiAgJC53aGVuKCAkLnJlYWR5KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICRwbGF5QnV0dG9uLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgJHBsYXlCdXR0b24ucmVtb3ZlQ2xhc3MoJ3B1bHNlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vc3RhcnQgZ2FtZSB3aGVuICdzdGFydCBidXR0b24nIGlzIHB1c2hlZCwgb25seSBpZiBnYW1lIG5vdCBzdGFydGVkXG4gICRwbGF5Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGlmIChnYW1lT24gPT09IGZhbHNlKSB7XG4gICAgICAvL3Jlc2V0IGdhbWVcbiAgICAgIHJlc2V0KCk7XG4gICAgICAvL3N0b3JlIHRoYXQgZ2FtZSBoYXMgYmVlbiBzdGFydGVkXG4gICAgICBnYW1lT24gPSB0cnVlO1xuICAgICAgLy9ydW4gZnVuY3Rpb24gdG8gc2hvdyBiZWF2ZXJzIGFuZCBvdHRlcnMgZm9yIHRpbWUgaW50ZXJ2YWxcbiAgICAgIHNob3dBbmltYWxzKCk7XG4gICAgICAvL3N0YXJ0IHRpbWVyXG4gICAgICB0aW1lcklkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aW1lUmVtYWluaW5nLS07XG4gICAgICAgICR0aW1lclNjcmVlbi5odG1sKHRpbWVSZW1haW5pbmcpO1xuICAgICAgICAvLyB3aGVuIHRpbWVyIHJlYWNoZXMgemVybyBzdG9wIGdhbWVcbiAgICAgICAgaWYgKHRpbWVSZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgICAkdGltZXJTY3JlZW4uYWRkVGVtcG9yYXJ5Q2xhc3MoJ3JpbmdpbmcnLCAyMDAwKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xuICAgICAgICAgIGdhbWVPbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vc2VsZWN0IHJhbmRvbSBzcXVhcmVcbiAgY29uc3Qgc2VsZWN0UmFuZG9tU3F1YXJlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAkc3F1YXJlcy5sZW5ndGgpO1xuICAgIHJldHVybiAkc3F1YXJlcy5lcShyYW5kb21JbmRleCk7XG4gIH07XG5cbiAgLy8gcmFuZG9taXNlIHdoaWNoIGFuaW1hbCB0byBjYWxsIChjdXJyZW5sdHkgb3R0ZXIgb3IgYmVhdmVyKSwgYnV0IHByZWZlciBiZWF2ZXJcbiAgY29uc3QgcmFuZG9tQW5pbWFsID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDEpICsgMSkgPCAzMCA/ICdvdHRlcicgOiAnYmVhdmVyJztcbiAgfTtcblxuICAvL2FkZCBiZWF2ZXIvb3R0ZXIgY2xhc3MgdG8gcmFuZG9tIHNxdWFyZSwgdGhlbiBjYWxsIGZ1bmN0aW9uIGFnYWluIGF0IGFuIHJhbmRvbSBpbnRlcnZhbCAoYmV0d2VlbiAzIGFuZCAxIHNlY29uZClcbiAgY29uc3Qgc2hvd0FuaW1hbHMgPSBmdW5jdGlvbigpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNlbGVjdFJhbmRvbVNxdWFyZSgpLmFkZFRlbXBvcmFyeUNsYXNzKHJhbmRvbUFuaW1hbCgpLCAxMDAwKTtcbiAgICAgIGRlbGF5ID0gTWF0aC5yYW5kb20oKSAqIDEwMDAgKiAoMi41IC0gMSkgKyAxO1xuICAgICAgLy9vbmx5IHNob3cgYW5pbWFscyBpZiBnYW1lIGhhcyBiZWVuIHN0YXJ0ZWQgYW5kIGNvdW50ZG93biB0aW1lciBoYXMgbm90IHJ1biBvdXRcbiAgICAgIGlmIChnYW1lT24gPT09IHRydWUpIHtcbiAgICAgICAgdGltZVNob3dBbmltYWwgPSAkLm5vdygpO1xuICAgICAgICBzaG93QW5pbWFscygpO1xuICAgICAgfVxuICAgIH0sIGRlbGF5KTtcbiAgfTtcblxuICAvLyBjaGVjayBhbmQgc2hvdyBiYWRnZXMgaWYgcGxheWVyJ3Mgc2NvcmVzIGFyZSBoaWdoIGVub3VnaFxuICBjb25zdCBjaGVja0FuZFNob3dCYWRnZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoYmVhdmVyU2NvcmUgPiA0KSB7XG4gICAgICAkYmFkZ2UxLmFkZENsYXNzKCdiYWRnZTEnKTtcbiAgICB9XG4gICAgaWYgKGJlYXZlclNjb3JlID4gOSkge1xuICAgICAgJGJhZGdlMi5hZGRDbGFzcygnYmFkZ2UyJyk7XG4gICAgfVxuICAgIGlmIChiZWF2ZXJTY29yZSA+IDE0KSB7XG4gICAgICAkYmFkZ2UzLmFkZENsYXNzKCdiYWRnZTMnKTtcbiAgICB9XG4gICAgaWYgKGJlYXZlclNjb3JlID4gMTkpIHtcbiAgICAgICRiYWRnZTQuYWRkQ2xhc3MoJ2JhZGdlNCcpO1xuICAgIH1cbiAgICBpZiAodXNlclNjb3JlID4gaGlnaHNjb3JlKSB7XG4gICAgICAkYmFkZ2U1LmFkZENsYXNzKCdiYWRnZTUnKTtcbiAgICB9XG4gICAgaWYgKGJsYW5rU2NvcmUgPiA5KSB7XG4gICAgICAkYmFkZ2U2LmFkZENsYXNzKCdiYWRnZTYnKTtcbiAgICB9XG4gICAgaWYgKG90dGVyU2NvcmUgPiA0KSB7XG4gICAgICAkYmFkZ2U3LmFkZENsYXNzKCdiYWRnZTcnKTtcbiAgICB9XG4gICAgaWYgKG90dGVyU2NvcmUgPiA5KSB7XG4gICAgICAkYmFkZ2U4LmFkZENsYXNzKCdiYWRnZTgnKTtcbiAgICB9XG4gIH07XG5cbiAgLy9nYW1lIGxvZ2ljIGZvciB1c2VyIGNsaWNraW5nIG9uIGJlYXZlcnMvb3R0ZXJzL2VtcHR5IHNxdWFyZVxuICAkZ2FtZWhvbGRlci5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgdXNlckNsaWNrQW5pbWFsID0gJC5ub3coKTtcbiAgICBpZiAoZ2FtZU9uID09PSB0cnVlKSB7XG4gICAgICBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2JlYXZlcicpKSB7XG4gICAgICAgIC8vdXBkYXRlIHNjb3Jlc1xuICAgICAgICBjbGlja1Njb3JlID0gMjA7XG4gICAgICAgIHVzZXJTY29yZSArPSAyMDtcbiAgICAgICAgYmVhdmVyU2NvcmUgKz0gMTtcbiAgICAgICAgLy9zaG93IGJhZGdlc1xuICAgICAgICBjaGVja0FuZFNob3dCYWRnZXMoKTtcbiAgICAgICAgLy9oaWRlIGFuaW1hbCBieSByZW1vdmluZyBjbGFzc1xuICAgICAgICAoJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2JlYXZlcicpKTtcbiAgICAgICAgLy9tYWtlIHNvdW5kIChub3QgaW5jbHVkZWQgeWV0KVxuICAgICAgfSBlbHNlIGlmICgkKGUudGFyZ2V0KS5oYXNDbGFzcygnb3R0ZXInKSkge1xuICAgICAgICBjbGlja1Njb3JlID0gLTEwO1xuICAgICAgICB1c2VyU2NvcmUgLT0gMjA7XG4gICAgICAgIG90dGVyU2NvcmUgKz0gMTtcbiAgICAgICAgY2hlY2tBbmRTaG93QmFkZ2VzKCk7XG4gICAgICAgICgkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnb3R0ZXInKSk7XG4gICAgICAgIC8vbWFrZSBzb3VuZCAobm90IGluY2x1ZGVkIHlldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrU2NvcmUgPSAtNTtcbiAgICAgICAgdXNlclNjb3JlIC09IDU7XG4gICAgICAgIGJsYW5rU2NvcmUgKz0gMTtcbiAgICAgICAgLy9tYWtlIHNvdW5kIChub3QgaW5jbHVkZWQgeWV0KVxuICAgICAgfVxuICAgICAgLy9zaG93IHVzZXJzIGN1cnJlbnQgc2NvcmUsIHJ1bm5pbmcgdG90YWwgYW5kIGNsaWNrIHRpbWVcbiAgICAgICRjbGlja1Njb3JlU2NyZWVuLnRleHQoY2xpY2tTY29yZSk7XG4gICAgICAkdXNlclNjb3JlU2NyZWVuLnRleHQodXNlclNjb3JlKTtcbiAgICAgIC8vc3RvcmUgdXNlcnMgdGltZSBkaWZmZXJlbmNlIGluIGFycmF5XG4gICAgICB1c2VyVGltZUFycmF5LnB1c2goZmluZENsaWNrVGltZSgpKTtcbiAgICAgIC8vc2hvdyBjbGljayB0aW1lIHRvIHVzZXJzXG4gICAgICAkY2xpY2tUaW1lRGlmZmVyZW5jZVNjcmVlbi50ZXh0KGZpbmRDbGlja1RpbWUoKSk7XG4gICAgICAvL2ZpbmQgYW5kIHNob3cgdXNlcnMgZmFzdGVzdCBjbGljayB0aW1lXG4gICAgICAkZmFzdGVzdENsaWNrU2NyZWVuLnRleHQoZmluZFVzZXJGYXN0ZXN0Q0xpY2soKSk7XG4gICAgICAvL2ZpbmQgYW5kIHNob3cgdXNlcnMgYXZlcmFnZSBjbGljayB0aW1lXG4gICAgICAkYXZlcmFnZUNMaWNrU2NyZWVuLnRleHQoZmluZFVzZXJBdmVyYWdlQ2xpY2tUaW1lKCkpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy9jcmVhdGUgJ2FkZFRlbXBvcmFyeUNsYXNzJyBmdW5jdGlvblxuICAoZnVuY3Rpb24oJCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgIGFkZFRlbXBvcmFyeUNsYXNzOiBmdW5jdGlvbihjbGFzc05hbWUsIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXM7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZWxlbWVudHMucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSwgZHVyYXRpb24pO1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKGpRdWVyeSk7XG59KTtcbiJdfQ==
